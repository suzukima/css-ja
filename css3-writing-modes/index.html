<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html lang=en>
 <head><meta content="text/html; charset=utf-8" http-equiv=Content-Type>
	<meta content="CSS Writing Modes Module Level 3の日本語翻訳です。" name="description">

  <title>CSS Writing Modes Module Level 3 日本語翻訳</title>
  <link href=default.css rel=stylesheet type="text/css">

  <style type="text/css">
    object { vertical-align: middle; }
    .sidebar { float: right; background: #eee; border: solid gray; margin: 1em; }
    .sidebar .figure { margin: 1em; }
    .sidebar object { margin: 0 auto; display: block; }
    .figurepair { display: table; margin: 1em auto; }
    .figurepair .figure { display: table-cell; }
     h2, .example { clear: both; }
    .figure img,
    .figure object,
    .example img,
    dd img { max-width: 100%; display: block; margin: 1em auto; }
    div.figure table {
    	margin:auto;
		}
		.headernotes { font-size: 80%; border: 1px solid #36C; background-color: #EEF; margin: 0 0 2em 0; padding: 1em; }
  </style>
  <link href="http://www.w3.org/StyleSheets/TR/W3C-WD.css" rel=stylesheet
  type="text/css">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-23975477-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
 </head>

 <body>
	<div class=headernotes>
		<p>この文章は、<a href="http://www.w3.org/TR/2011/WD-css3-writing-modes-20110901/">CSS Writing Modes Module Level 3(W3C Working Draft 1 September 2011)</a>を、独自に翻訳したものです。</p>
		<p>この仕様書の正式なものは W3C のサイトにある英語版であり、その著作権は W3C が保有しています。また、翻訳に誤りがある可能性に留意してください。また、読みやすさを考慮して、スタイルやレイアウトを変更している箇所があります。ご注意下さい。</p>
		<p>文中では日本語組版の用語を用いております。日本語組版については<a href="http://www.w3.org/TR/jlreq/ja/">日本語組版処理の要件（日本語版）</a>に目を通しておくことをおすすめいたします。</p>
		<p>その他の仕様書の翻訳は、<a href="../">CSS 日本語レイアウト関連仕様 日本語翻訳</a>からご覧下さい。</p>
		<p>公開開始日: 2011.09.11</p>
     <p>更新日: 2011.10.25</p>
	</div>

  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1>CSS Writing Modes Module Level 3</h1>

   <h2 class="no-num no-toc" id=longstatus-date>W3C Working Draft 1 September
    2011</h2>

   <dl>
    <dt>This version:</dt>
    <!--
    <dd><a href="http://dev.w3.org/csswg/css3-writing-modes/">http://dev.w3.org/csswg/css3-writing-modes/</a>
-->

    <dd><a
     href="http://www.w3.org/TR/2011/WD-css3-writing-modes-20110901/">http://www.w3.org/TR/2011/WD-css3-writing-modes-20110901/</a>
     

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css3-writing-modes/">http://www.w3.org/TR/css3-writing-modes/</a>

    <dt>Latest editor's draft:

    <dd><a
     href="http://dev.w3.org/csswg/css3-writing-modes/">http://dev.w3.org/csswg/css3-writing-modes/</a>

    <dt>Previous version:

    <dd><a
     href="http://www.w3.org/TR/2011/WD-css3-writing-modes-20110531/">http://www.w3.org/TR/2011/WD-css3-writing-modes-20110531/</a>

    <dt>Editors:

    <dd><a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a>
     (Mozilla)

    <dd><a href="mailto:kojiishi@gluesoft.co.jp">Koji Ishii</a> (Invited
     Expert)

    <dd><a href="mailto:murakami@antenna.co.jp">Shinyu Murakami</a> (<a
     href="http://www.antenna.co.jp/">Antenna House</a>)

    <dt>Previous Editors:

    <dd><a href="mailto:paulnel@microsoft.com">Paul Nelson</a> (<a
     href="http://www.microsoft.com/">Microsoft</a>)

    <dd><a href="mailto:michelsu@microsoft.com">Michel Suignard</a> (<a
     href="http://www.microsoft.com/">Microsoft</a>)
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> &copy; 2011 <a
    href="http://www.w3.org/"><acronym title="World Wide Web
    Consortium">W3C</acronym></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute
    of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym
    title="European Research Consortium for Informatics and
    Mathematics">ERCIM</acronym></a>, <a
    href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract> 概要</h2>

	<p>CSS3 Writing Modesは左から右(ラテン語やインド語)、右から左(ヘブライ語やアラビア語)、双方向(ラテン語とアラビア語の同時使用)、縦組(アジア言語の文章)のような、世界各国の組方向をサポートするCSSの機能を定義している。</p>

	<p>根本的に下から上へ進む文章はこのバージョンでは扱われない。関連する問題は<a href="#UTN22" rel=biblioentry>[UTN22]<!--{{UTN22}}--></a> を参照のこと。</p>

  <h2 class="no-num no-toc" id=status>この文書の位置づけ</h2>
  <!--begin-status-->

  <p><em>このセクションは、公開時点でのこの文書の位置付けについて述べている。他の文書がこの文書を置き換えることがある。W3Cが現在公開しているリストとテクニカルレポートの最新版は、<a href="http://www.w3.org/TR/">W3C technical reports
	 index (http://www.w3.org/TR/)</a>で見つけることができる。</em></p>

	<p>Working Draftでの公開は W3Cメンバーの支持を意味するものではない。下書きのドキュメントであり、いつでも更新、他のドキュメントによる置き換えや廃止扱いにされうる。これは、進行中の作業以外のものとしてこのドキュメントを引用することは不適切である。</p>

  <p>(<a
   href="http://lists.w3.org/Archives/Public/www-style/">アーカイブされている</a>) 公開メーリングリスト <a href="mailto:www-style@w3.org">www-style@w3.org</a> (<a href="http://www.w3.org/Mail/Request">参加手順はこちら</a>) をこの仕様の議論に推奨している。eメールを送る際には、サブジェクトに &#8220;css3-writing-modes&#8221; を追加してほしい。できれば &#8220;[<!---->css3-writing-modes<!---->] <em>&hellip;summary of
	 comment&hellip;</em>&#8221;のように。</p>

  <p>このドキュメントは<a
   href="http://www.w3.org/Style/CSS/members">CSS Working Group</a> (
	 <a href="http://www.w3.org/Style/">Style Activity</a>の一環)で製作された。</p>

  <p>このドキュメントは<a
   href="http://www.w3.org/Consortium/Patent-Policy-20040205/">2004年2月6日のW3C特許ポリシー</a>に従うグループによって製作された。W3Cはグループの成果を結びつけて作られた<a
   href="http://www.w3.org/2004/01/pp-impl/32061/status"
	 rel=disclosure>あらゆる開示特許の公開リスト</a>を管理しており、ここには特許開示の指示も含まれている。
   <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">本質的な特許請求の範囲</a>に含まれると思われる特許について実際の知識を持っている人は、
	 <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">W3C特許ポリシーの第6章</a>に従い、情報を公開しなければならない。</a></p>
  <!--end-status-->

  <p>以下の機能は抜ける恐れがあるもので、おそらくCRまでには落とされるだろう:

  <ul>
   <li>&lsquo;<a
    href="#text-orientation0"><code
    class=property>text-orientation</code></a>&rsquo;の&lsquo;<a href="#use-glyph-orientation"><code
		class=css>use-glyph-orientation</code></a>&rsquo;</li> 
   <li>&lsquo;<a
    href="#text-combine-horizontal0"><code
    class=property>text-combine-horizontal</code></a>&rsquo;の値である &lsquo;<code class=css>ascii-digits</code>&rsquo;, &lsquo;<code
    class=css>digits</code>&rsquo;, &lsquo;<code
    class=css>alpha</code>&rsquo;, &lsquo;<code
    class=css>latin</code>&rsquo;, そして &lsquo;<code
		class=css>alphanumeric</code>&rsquo; </li> 

   <li>&lsquo;<a href="#text-combine-mode0"><code
		class=property>text-combine-mode</code></a>&rsquo; プロパティ</li>
  </ul>

  <h2 class="no-num no-toc" id=Contents> 目次</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#text-flow"><span class=secno>1. </span> Writing Modesの紹介</a>
    <ul class=toc>
     <li><a href="#placement"><span class=secno>1.1. </span> モジュールの関係</a>

     <li><a href="#values"><span class=secno>1.2. </span> 値について</a>
    </ul>

   <li><a href="#text-direction"><span class=secno>2. </span> 字詰め方向と双方向性</a>
    <ul class=toc>
     <li><a href="#direction"><span class=secno>2.1. </span> 方向の指定:  &lsquo;<code class=property>direction</code>&rsquo;
      プロパティ</a>

     <li><a href="#unicode-bidi"><span class=secno>2.2. </span> 埋め込みと上書き: &lsquo;<code
      class=property>unicode-bidi</code>&rsquo; プロパティ</a>

     <li><a href="#bidi-example"><span class=secno>2.3. </span> 双方向テキストの例</a>

     <li><a href="#bidi-box-model"><span class=secno>2.4. </span> 双方向文中にあるインライン要素のためのボックスモデル</a>
    </ul>

   <li><a href="#vertical-intro"><span class=secno>3. </span> 縦書きの導入</a>
    <ul class=toc>
     <li><a href="#writing-mode"><span class=secno>3.1. </span> 行送り方向: &lsquo;<code class=property>writing-mode</code>&rsquo;
      プロパティ</a>
      <ul class=toc>
       <li><a href="#svg-writing-mode"><span class=secno>3.1.1. </span>
        SVG1.1 の &lsquo;<code class=property>writing-mode</code>&rsquo;
        の値</a>
      </ul>
    </ul>

   <li><a href="#inline-alignment"><span class=secno>4. </span> インライン要素の配置</a>
    <ul class=toc>
     <li><a href="#intro-baselines"><span class=secno>4.1. </span> ベースラインの導入</a>

     <li><a href="#text-baselines"><span class=secno>4.2. </span> テキストのベースライン</a>

     <li><a href="#replaced-baselines"><span class=secno>4.3. </span> 原子的なインラインベースライン</a>

     <li><a href="#baseline-alignment"><span class=secno>4.4. </span> ベースラインの配置</a>
    </ul>

   <li><a href="#intro-text-layout"><span class=secno>5. </span> 縦書きテキストレイアウトの導入</a>
    <ul class=toc>
     <li><a href="#text-orientation"><span class=secno>5.1. </span> テキストの方向: &lsquo;<code class=property>text-orientation</code>&rsquo; プロパティ</a>
    </ul>

   <li><a href="#abstract-box"><span class=secno>6. </span> 抽象ボックスの用語</a>
    <ul class=toc>
     <li><a href="#abstract-dimensions"><span class=secno>6.1. </span>
      論理的な次元</a>

     <li><a href="#abstract-directions"><span class=secno>6.2. </span>
      抽象的で物理的な方向</a>

     <li><a href="#line-directions"><span class=secno>6.3. </span>
      行相対の方向</a>

     <li><a href="#logical-directions"><span class=secno>6.4. </span>
      送り相対の方向</a>

     <li><a href="#logical-to-physical"><span class=secno>6.5. </span>
      抽象と物理のマッピング</a>
    </ul>

   <li><a href="#abstract-layout"><span class=secno>7. </span> 抽象的なボックスレイアウト</a>
    <ul class=toc>
     <li><a href="#vertical-layout"><span class=secno>7.1. </span> 縦組でのレイアウト原則</a>

     <li><a href="#dimension-mapping"><span class=secno>7.2. </span> 次元のマッピング</a>

     <li><a href="#orthogonal-flows"><span class=secno>7.3. </span> 送り方向が直行する場合</a>
      <ul class=toc>
       <li><a href="#orthogonal-auto"><span class=secno>7.3.1. </span> 送り方向が直交する場合のオートサイジング</a>

       <li><a href="#orthogonal-multicol"><span class=secno>7.3.2. </span> 送り方向が直交する場合のマルチカラムレイアウト</a>

       <li><a href="#orthogonal-pagination"><span class=secno>7.3.3. </span> 送り方向が直交する場合の改ページ</a>
      </ul>

     <li><a href="#logical-direction-layout"><span class=secno>7.4. </span> 送り相対のマッピング</a>

     <li><a href="#line-mappings"><span class=secno>7.5. </span> 行相対マッピング</a>

     <li><a href="#physical-only"><span class=secno>7.6. </span> 純粋に物理的なマッピング</a>

     <li><a href="#caption-side"><span class=secno>7.7. </span> 表題のマッピング: &lsquo;<code class=property>caption-side</code>&rsquo;
      keywords</a>
    </ul>

   <li><a href="#page-direction"><span class=secno>8. </span> Page Flow: ページの進行方向</a>

   <li><a href="#text-combine"><span class=secno>9. </span> グリフの合成</a>
    <ul class=toc>
     <li><a href="#text-combine-horizontal"><span class=secno>9.1. </span>
      縦組での水平合成: &lsquo;<code
      class=property>text-combine-horizontal</code>&rsquo; プロパティ</a>

     <li><a href="#text-combine-mode"><span class=secno>9.2. </span>
      縦組における水平方向グリフのスケーリング: &lsquo;<code
      class=property>text-combine-mode</code>&rsquo; プロパティ</a>
    </ul>

   <li class=no-num><a href="#changes">変更点</a>
    <ul class=toc>
     <li class=no-num><a href="#recent-changes"> May 2011
      CSS Writing Modes Module Level 3 <abbr title="Working
      Draft">WD</abbr>からの変更点</a>
    </ul>

   <li><a href="#conformance"><span class=secno>10. </span> Conformance</a>
    <ul class=toc>
     <li><a href="#conventions"><span class=secno>10.1. </span> Document
      Conventions</a>

     <li><a href="#conformance-classes"><span class=secno>10.2. </span>
      Conformance Classes</a>

     <li><a href="#partial"><span class=secno>10.3. </span> Partial
      Implementations</a>

     <li><a href="#experimental"><span class=secno>10.4. </span> Experimental
      Implementations</a>

     <li><a href="#testing"><span class=secno>10.5. </span>Non-Experimental
      Implementations</a>

     <li><a href="#cr-exit-criteria"><span class=secno>10.6. </span> CR Exit
      Criteria</a>
    </ul>

   <li class=no-num><a href="#acknowledgements"> Acknowledgements</a>

   <li class=no-num><a href="#character-properties">Appendix A. Characters
    and Properties</a>

   <li class=no-num><a href="#script-orientations">Appendix B:
    Bi-orientational Transformations</a>

   <li class=no-num><a href="#vertical-typesetting-details">Appendix C:
    Vertical Typesetting Synthesis</a>

   <li class=no-num><a href="#intrinsic-sizing">Appendix D: Intrinsic
    Dimensions</a>
    <ul class=toc>
     <li class=no-num><a href="#multicol-intrinsic"> Intrinsic Sizes in
      Multi-column Layout</a>
    </ul>

   <li class=no-num><a href="#bidi-html"> Appendix E: Bidi Rules for HTML</a>
    

   <li class=no-num><a href="#references"> References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references"> Normative
      references</a>

     <li class=no-num><a href="#other-references"> Other references</a>
    </ul>

   <li class=no-num><a href="#property-index"> Property Index</a>
  </ul>
  <!--end-toc-->

  <h2 id=text-flow><span class=secno>1. </span> Writing Modesの紹介</h2>

	<p>CSS3 Writing Modesは左から右(ラテン語やインド語)、右から左(ヘブライ語やアラビア語)、双方向(ラテン語とアラビア語の同時使用)、縦書き(アジア言語の文章)のような、世界各国の組方向をサポートするCSSの機能を定義している。</p>

  <p>CSSの<dfn id=writing-mode0>writing mode</dfn>は、&lsquo;<a href="#writing-mode1"><code
   class=property>writing-mode</code></a>&rsquo;, &lsquo;<a
   href="#direction0"><code class=property>direction</code></a>&rsquo;, 
   &lsquo;<a href="#text-orientation0"><code
   class=property>text-orientation</code></a>&rsquo; のプロパティによって決定される。writing modeでは、 
		<a href="#inline-base-direction"><i>inline base direction(字詰め方向:1つの行で、1つの文字から次の文字へと続く方向)</i></a>と
		<a href="#block-flow-direction"><i>block flow direction(行送り方向:1つの行から次の行へと続く方向)</i></a>によって定義されている:

  <div class=sidebar>
   <div class="figure right"> <a href="diagrams/text-flow-vectors-tb.svg"
    type="image/svg+xml"> <img alt="ラテン語を基本としたシステムのwriting mode" class=landscape
    src="diagrams/text-flow-vectors-tb.png"></a>
    <p class=caption>ラテン語を基本としたシステムのwriting mode
   </div>

   <div class="figure left"> <a
    href="diagrams/text-flow-vectors-lr-reverse.svg" type="image/svg+xml">
    <img alt="モンゴル語を基本としたシステムのwriting mode" class=landscape
    src="diagrams/text-flow-vectors-lr-reverse.png"></a>
    <p class=caption>モンゴル語を基本としたシステムのwriting mode
   </div>

   <div class="figure right"> <a href="diagrams/text-flow-vectors-tb.svg"
    type="image/svg+xml"> <img alt="ハン語を基本としたシステムのwriting mode" class=landscape
    src="diagrams/text-flow-vectors-tb.png"></a> <a
    href="diagrams/text-flow-vectors-rl.svg" type="image/svg+xml"> <img
    alt="ハン語を基本としたシステムのwriting mode" class=landscape
    src="diagrams/text-flow-vectors-rl.png"></a>
    <p class=caption>ハン語を基本としたシステムのwriting mode
   </div>
  </div>

	<p><dfn id=inline-base-direction>inline base direction</dfn>は、両端に開始と終了がある行の上に並べられたコンテンツの主方向である。
	The &lsquo;<a
   href="#direction0"><code class=property>direction</code></a>&rsquo;
   プロパティは要素の字詰め方向を指定し、&lsquo;<a href="#unicode-bidi0"><code
	 class=property>unicode-bidi</code></a>&rsquo; プロパティやテキスト固有の方向とともに、行内のinline-level contentの順序を決定している。

	<p><dfn id=block-flow-direction>block flow direction</dfn>は、
	ブロックコンテナ内での、ブロックレベルボックスを積む方向や、行ボックスを積む方向である。
	&lsquo;<a
   href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo;
	 プロパティは行送り方向を決定している。

	<p><dfn id=horizontal-writing-mode>horizontal writing mode(横書き)</dfn>
	はテキストの水平行を持つ。そして上方向や下方向へ行送りする。
	 <dfn id=vertical-writing-mode>vertical writing mode(縦書き)</dfn>
	 はテキストの垂直行を持つ。そして右方向か左方向へ行送りする。

  <p class=note>これらの言葉は<dfn
	 id=vertical-block-flow>vertical block flow</dfn> (上方向や下方向への行送り)や
	 <dfn id=horizontal-block-flow>horizontal block
	 flow</dfn> (左方向や右方向への行送り)と混同すべきではない。
	 混乱を避けるため、CSSの仕様ではこの後者の用語セットを用いていない。

  <p>Writing systemsは通常1つか2つのnative writing modesを持っている。いくつか例を示す:

  <ul>
   <li>ラテン語を基本としたsystemでは、通常下方向(上から下)の行送り方向で、左から右の字詰め方向を使って書かれている。

   <li>アラビア語を基本としたsystemでは、通常下方向(上から下)の行送り方向で、右から左の字詰め方向を使って書かれている。

   <li>モンゴル語を基本としたsystemでは、通常右方向(左から右)の行送り方向で、上から下の字詰め方向を使って書かれている。

   <li>ハン語を基本としたsystemでは、一般的に下方向(上から下)の行送り方向で、左から右の字詰め方向
		<strong>か</strong>、左方向(右から左)の行送り方向で、上から下の字詰め方向を使って書かれている。
		多くの雑誌と新聞は、同一ページにこれら2つのwriting modeを合わせて使うことになるだろう。 
  </ul>

  <p>writing modeの &lsquo;<a href="#text-orientation0"><code
   class=property>text-orientation</code></a>&rsquo; コンポーネントは、 <a href="#line-orientation"><i>line
	 orientation</i></a> と <i>typesetting mode</i>を決定し、<i>glyph orientation</i>
	 のようなテキストレイアウトの詳細を制御している。

  <p class=note>writing modeとvertical textのさらに深い導入は、Unicode Technical Note #22 <a href="#UTN22"
   rel=biblioentry>[UTN22]<!--{{UTN22}}--></a> (<a
   href="http://fantasai.inkedblade.net/style/discuss/vertical-text/paper">HTML
   version</a>)を参照のこと。 

  <h3 id=placement><span class=secno>1.1. </span> モジュールの関係</h3>

  <p>このモジュールは<a
   href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>のセクション8.6と9.10で定義されている &lsquo;<a
   href="#unicode-bidi0"><code class=property>unicode-bidi</code></a>&rsquo;
   と &lsquo;<a href="#direction0"><code
   class=property>direction</code></a>&rsquo; の機能を置き換え、拡張する。</p>

  <h3 id=values><span class=secno>1.2. </span> 値について</h3>

  <p>本仕様は<a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>に書かれた<a
   href="http://www.w3.org/TR/CSS21/about.html#property-defs">CSS property
   definition conventions(CSSプロパティの定義規則)</a>に従っている。 本仕様で定義されていない値の型は、CSS Level 2 Revision 1<a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>で定義されている。<a
   href="#CSS3COLOR" rel=biblioentry>[CSS3COLOR]<!--{{CSS3COLOR}}--></a>を例に挙げると、このモジュールを組み合わせて使うと、本仕様の中でも &lt;color&gt; の値の型の定義が拡張される。</p>
  <p>これらの定義にリストアップされたプロパティの固有値に加えて、本仕様で定義されている全プロパティでも、これらのプロパティの値のように <a
   href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">inherit</a> keyword(キーワード継承)を受け入れる。読みやすさを考慮して、本件は明示的に繰り返さない。</p>

  <h2 id=text-direction><span class=secno>2. </span> 字詰め方向と双方向性</h2>

  <p>ほとんどの文字が左から右に書かれている一方で、いくつかの文字は右から左に書かれている。一部の文章、特にアラビア語かヘブライ語の文字で書かれ、その中に複数言語が混在する文脈があると、単一の(視覚的に表示された)ブロック内のテキストで複数方向が混在することがある。この現象は<span
   class=index-def id=bidirectionality title="bidirectionality (bidi)"><dfn
   id=bidirectionality0>bidirectionality(双方向性)</dfn></span>, もしくは短く "bidi(バイダイ)"と呼ばれる。</p>

  <div class=figure>
   <p><img alt="An example of bidirectional text is a Latin name in an Arabic
    sentence. The sentence overall is typeset right-to-left, but the letters
    in the Latin word in the middle are typeset left-to-right."
    src="diagrams/bidi.png">

   <p class=caption>双方向性の例</p>
  </div>

  <p>Unicode standard (<a
   href="http://www.unicode.org/reports/tr9/">Unicode Standard Annex #9</a>)
   では、双方向テキストの適切な方向を決定するための複雑なアルゴリズムを定義している。このアルゴリズムは文字のプロパティの他に、埋め込みや上書きの明確なコントロールに基づいた暗黙的な部分で構成されている。CSSは適切な双方向レンダリングを実現するために、このアルゴリズムを頼りにしている。
&lsquo;<a href="#direction0"><code
   class=property>direction</code></a>&rsquo; と &lsquo;<a
   href="#unicode-bidi0"><code class=property>unicode-bidi</code></a>&rsquo;
   のプロパティは、作者にドキュメント言語の要素と属性を、このアルゴリズムとどうマッピングするか指定できるようにしている。</p>

  <p>双方向性をもったテキストをサポートするユーザーエージェントは、強制
   (<a
   href="http://www.unicode.org/reports/tr9/#Bidirectional_Character_Types">bidi class B</a>) 改行かブロック境界で中断されない全てのインラインボックスの配列に対しUnicode双方向アルゴリズムを適用しなくてはならない。この配列は双方向アルゴリズムでの<dfn id=paragraph>paragraph(段落)</dfn>単位を形成する。</p>

  <p>&lsquo;<a
   href="#unicode-bidi0"><code class=property>unicode-bidi</code></a>&rsquo;の&lsquo;<a href="#plaintext"><code class=css>plaintext</code></a>&rsquo;が有効な場合を除き、段落埋め込みレベルはUnicodeアルゴリズムのP2とP3にあるヒューリスティックに得られたものよりも、むしろ段落中要素の&lsquo;<a href="#direction0"><code
   class=property>direction</code></a>&rsquo;プロパティの値に応じて設定されている。通常、段落中要素は包含ブロックであるが、<a href="#isolate">isolation(分離した)</a>バイダイを含む段落では、分離したインライン要素がその代わりとなる。</p>

  <p>テキストの書字方向が文章の構造と意味に依存していることから、ほとんどの場合
   &lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo;と&lsquo;<a href="#unicode-bidi0"><code class=property>unicode-bidi</code></a>&rsquo;のプロパティは、マークアップ中でのバイダイ情報と、適合するCSSスタイルとを割り当てるべきである。ドキュメント言語がバイダイをコントロールするマークアップ機能を提供するのであれば、作者とユーザーはそれらの機能を使うべきであり、これらを上書きするCSSのルールを指定すべきではない。</p>

  <p>HTML 4の仕様 (<a href="#HTML401"
   rel=biblioentry>[HTML401]<!--{{HTML401}}--></a>, section 8.2) では、双方向性はHTML要素のふるまいであると定義している。HTML4の仕様には双方向性における問題の詳細情報が含まれている。</p>

  <p class=note>HTMLのユーザーエージェントがCSSのスタイル機能をOFFにすることができるので、スタイルシートが無い状態でも正しい双方向レイアウトを保証するため、我々はHTML作者に&lsquo;<code class=property>dir</code>&rsquo;属性と&lt;bdo&gt; 要素を使うよう忠告している。

  <h3 id=direction><span class=secno>2.1. </span> 方向の指定: &lsquo;<a href="#direction0"><code
   class=property>direction</code></a>&rsquo; プロパティ</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>名称:

     <td><dfn id=direction0>direction</dfn>

    <tr>
     <th>値:

     <td>ltr | rtl

    <tr>
     <th>初期値:

     <td>ltr

    <tr>
     <th>適用対象:

     <td>全ての要素

    <tr>
     <th>継承:

     <td>される

    <tr>
     <th>パーセンテージ:

     <td>N/A

    <tr>
     <th>メディア:

     <td>visual

    <tr>
     <th>算出値:

     <td>指定した値
  </table>

  <p>このプロパティはテキストと行内の要素の書字方向、Unicode双方向アルゴリズムで使われる埋め込みと上書き (&lsquo;<a
   href="#unicode-bidi0"><code class=property>unicode-bidi</code></a>&rsquo;を参照) の方向を指定している。加えて、<a href="http://www.w3.org/TR/CSS21/tables.html">table(表)</a>の行レイアウト順序、水平<a href="http://www.w3.org/TR/CSS21/visufx.html#overflow">overflow(はみ出し)</a>の方向、行内のテキストのデフォルトの並べ方、他に字詰めの基本方向に依存するものに作用している。</p>

  <p>このプロパティの値の意味を以下に示す:

  <dl>
   <dt><dfn id=ltr>ltr</dfn>

   <dd>左から右の方向になる。

   <dt><dfn id=rtl>rtl</dfn>

   <dd>右から左の方向になる。
  </dl>

  <p class=note>&lsquo;<a href="#direction0"><code
   class=property>direction</code></a>&rsquo;プロパティは、&lsquo;<a
   href="#unicode-bidi0"><code class=property>unicode-bidi</code></a>&rsquo;
   プロパティの値が &lsquo;<a href="#normal"><code class=css>normal</code></a>&rsquo;であるインライン要素に指定されたバイダイの並び替えには何の影響も与えない。</p>

  <p>ルート要素の&lsquo;<a href="#direction0"><code
   class=property>direction</code></a>&rsquo;プロパティの値も初期包含ブロックへ伝搬され、&lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo;プロパティの値と共にドキュメント全体の基本となる組方向を決定する (<a href="#principal-writing-mode">こちら</a>を参照)。</p>

  <p class=note>注: HTML BODY要素の&lsquo;<a href="#direction0"><code
   class=property>direction</code></a>&rsquo;プロパティはビューポート(コンテンツが表示される領域)に伝搬<em>されない</em>。この特殊な振る舞いはbackgroundとoverflowのプロパティにのみ適用される。</p>

  <p class=note>表のcolumn要素に指定された&lsquo;<a href="#direction0"><code
   class=property>direction</code></a>&rsquo; プロパティは、ドキュメントツリーにおいて列がセルの祖先でないため、列内のセルへは継承されない。このように、CSSは<a href="#HTML401" rel=biblioentry>[HTML401]<!--{{HTML401}}--></a>のsection 11.3.2.1.に書かれている "dir" 属性の継承ルールを簡単に取得することができない。</p>

  <h3 id=unicode-bidi><span class=secno>2.2. </span> 埋め込みと上書き: &lsquo;<a href="#unicode-bidi0"><code
   class=property>unicode-bidi</code></a>&rsquo; プロパティ</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>名称:

     <td><dfn id=unicode-bidi0>unicode-bidi</dfn>

    <tr>
     <th>値:

     <td>normal | embed | [ isolate || bidi-override ] | plaintext

    <tr>
     <th>初期値:

     <td>normal

    <tr>
     <th>適用対象:

     <td>全ての要素(しかしproseを参照のこと)

    <tr>
     <th>継承:

     <td>されない

    <tr>
     <th>パーセンテージ:

     <td>N/A

    <tr>
     <th>メディア:

     <td>visual

    <tr>
     <th>算出値:

     <td>指定した値
  </table>

  <p>このプロパティの値の意味を以下に示す。

  <dl>
   <dt><dfn id=normal>normal</dfn>

   <dd>この要素は、双方向アルゴリズムに関してはレベルを追加する埋め込み(入れ子)を受け入れない。インライン要素だと、暗黙の並び替えは要素の境界を越えて作用する。

   <dt><dfn id=embed>embed</dfn>

   <dd>インライン要素なら、この値は双方向アルゴリズムに関してレベルを追加する埋め込み(入れ子)を受け入れる。この埋め込んだレベルの方向は&lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo;プロパティにより与えられる。要素の中では、並び替えは暗黙で行われる。これは、要素の始めだと、&lsquo;<code class=css>direction: ltr</code>&rsquo;に対しては LRE (U+202A)か、&lsquo;<code class=css>direction: rtl</code>&rsquo;に対しては RLE (U+202B)の追加に相当し、要素の終わりでは、 PDF (U+202C) の追加に相当する。<span class=note>この値はインライン要素でない場合、何の影響も及ぼさない。</span>

   <dt><dfn id=isolate>isolate</dfn>

   <dd>Unicode双方向アルゴリズムのために、要素のコンテンツは、分離・独立し、&lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo;プロパティによって書字方向が指定された段落の中にあるとされている。
    そして(もし、あれば)バイダイ段落を含むバイダイ解決のために、要素自身がObject Replacement Character (U+FFFC) のように扱われる。(要素が複数行にわたって改行された場合、要素の各ボックスはObject Replacement Characterとして扱われる。)

   <dt><dfn id=bidi-override>bidi-override</dfn>

   <dd>インライン要素に対しては、この値は上書きを実現する。ブロックコンテナ要素に対しては、この値はその他のブロックコンテナ要素ではなく、そのインラインレベルの子孫への上書きを実現する。これは、要素の中においては、並び替えが&lsquo;<a
    href="#direction0"><code class=property>direction</code></a>&rsquo;
    プロパティに従った順序に厳密であることを意味しており、双方向アルゴリズムの暗黙の部分は無視される。これは、要素の始めでは、&lsquo;<code
    class=css>direction: ltr</code>&rsquo; に対しては LRO (U+202D)が、&lsquo;<code class=css>direction: rtl</code>&rsquo; に対しては RLO (U+202E)の追加に相当し、要素の終わりでは PDF (U+202C) の追加に相当する。

   <dt><dfn id=plaintext>plaintext</dfn>

   <dd>
    <p>Unicode双方向アルゴリズムのために、要素が包含ブロックを形成するためにあるバイダイ段落の書字方向は、通常、要素が計算した&lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo;では決定されない。しかし、ヒューリスティックなUnicodeアルゴリズムのルールP2とP3には従う。インライン要素では、ブロックコンテナを除き、この値は &lsquo;<a href="#isolate"><code class=css>isolate</code></a>&rsquo;と同様に振る舞う。字詰め方向は&lsquo;<a
     href="#direction0"><code class=property>direction</code></a>&rsquo;の値ではなく、Unicodeのヒューリスティックなものを用いて決定される。
  </dl>

  <p>各バイダイ段落の中にある文字の最終的な順序は、上記のようにバイダイのコントロールコードが埋め込まれているものと同じであり、マークアップは削除されており、結果として得られる文字の順序は、スタイル付きテキストと同じ改行が生成されたplain text用のUnicode双方向アルゴリズム実装に渡されている。

  <p>このプロセスでは、&lsquo;<a href="#unicode-bidi0"><code
   class=property>unicode-bidi</code></a>&rsquo;プロパティが&lsquo;<a href="#normal"><code class=property>normal</code></a>&rsquo;以外の値、つまり要素に指定された&lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo;で強い文字(文字自身に方向を持つ)として扱われるような場合を除き、&lsquo;<code class=css>display:inline</code>&rsquo;で置換される要素はニュートラルな文字(右から左でも、左から右でも使用できる文字)として扱われる。他のアトミックなインラインレベルボックスは全て常にニュートラルな文字として扱われる。

  <p>インライン要素がバイダイ段落境界の周辺で分解された場合(例えば、ブロックや強制段落改行により分離された場合)、要素の終わりに相当するバイダイのコントロールコードは分解箇所の前に追加され、要素の開始に相当するコントロールコードは分解箇所の後ろに追加される。(言い換えれば、要素のどんな追加レベルや上書きも、段落改行で閉じられ、もう一方で再び開く。)

  <p>Unicodeアルゴリズムは追加レベルの制限が<em title="According to
   unicode 3.0, chapter 3, section 12, definition BD2. Specifically, page 58
   here: http://www.unicode.org/unicode/uni2book/ch03.pdf"> 61レベル</em>であるため、適切な場合を除き、値が&lsquo;<a href="#normal"><code
   class=property>normal</code></a>&rsquo;以外の<span
   class=propinst-unicode-bidi>&lsquo;<a href="#unicode-bidi0"><code
   class=property>unicode-bidi</code></a>&rsquo;</span>プロパティを使わないよう注意すること。 特に値が&lsquo;<code class=property>inherit</code>&rsquo;の場合は注意を払うこと。しかし、しかし、一般的に、ブロックとしての表示を意図している要素は、displayをinlineに変更しつつ、要素を維持するため&lsquo;<code
   class=css>unicode-bidi: isolate</code>&rsquo; とするのが好ましい。(以下のサンプルを参照)

  <h3 id=bidi-example><span class=secno>2.3. </span> 双方向テキストの例</h3>

  <p>双方向テキストのXMLを使ったXMLドキュメントの例を以下に示す。これは重要な設計原理を説明している。ドキュメント言語の設計者は言語の適正さ(要素と属性)と添付されたスタイルシートの双方で、バイダイを考慮に入れるべきである。スタイルシートはバイダイのルールがスタイルのルールと分離されるように、またドキュメント言語のバイダイの振る舞いが保護されるよう、記述したルールが他のスタイルシートで上書きされないように設計されるべきである。

  <div class=example>
   <p>この例では、小文字が左から右で使われる文字を表し、大文字が右から左で使われる文字を表す。text streamはバッキングストア内の順で表示される。</p>

   <pre class=xml-example><code class=xml>
&lt;HEBREW&gt;
  &lt;PAR&gt;HEBREW1 HEBREW2 english3 HEBREW4 HEBREW5&lt;/PAR&gt;
  &lt;PAR&gt;HEBREW6 &lt;EMPH&gt;HEBREW7&lt;/EMPH&gt; HEBREW8&lt;/PAR&gt;
&lt;/HEBREW&gt;
&lt;ENGLISH&gt;
  &lt;PAR&gt;english9 english10 english11 HEBREW12 HEBREW13&lt;/PAR&gt;
  &lt;PAR&gt;english14 english15 english16&lt;/PAR&gt;
  &lt;PAR&gt;english17 &lt;HE-QUO&gt;HEBREW18 english19 HEBREW20&lt;/HE-QUO&gt;&lt;/PAR&gt;
&lt;/ENGLISH&gt;
    </code></pre>

   <p>これは任意のXMLであるので、スタイルシートは書字方向の設定に関与している。これはこのようなスタイルシートとなる:</p>

   <pre>
/* Rules for bidi */
HEBREW, HE-QUO  {direction: rtl; unicode-bidi: embed;}
ENGLISH         {direction: ltr; unicode-bidi: embed;} 

/* Rules for presentation */
HEBREW, ENGLISH, PAR  {display: block;}
EMPH                  {font-weight: bold;}
    </pre>

   <p>HEWREW要素は、書字方向が右から左のブロックである。ENGLISH要素は書字方向が左から右のブロックである。PARは親要素から書字方向を継承するブロックである。よって、最初の2つのPARは右上から読まれ、最後の3つPARは左上から読まれる。HEBREWとENGLISHは話をわかりやすくするためだけに選ばれた要素名であることに注意すること。一般的に、要素名は言語を参照せずに構造を伝える必要がある。</p>

   <p>EMPH要素はインラインレベル要素で、<span
    class=propinst-unicode-bidi>&lsquo;<a href="#unicode-bidi0"><code
    class=property>unicode-bidi</code></a>&rsquo;</span>の値は&lsquo;<a
    href="#normal"><code class=property>normal</code></a>&rsquo;(初期値)であるので、テキストの順序には影響しない。一方、HE-QUO要素は埋め込みを行う。</p>

   <p>行の長さが長い場合、このテキストの書式は次のようになる:</p>

   <pre class=ascii-art>
               5WERBEH 4WERBEH english3 2WERBEH 1WERBEH

                                8WERBEH <b>7WERBEH</b> 6WERBEH

english9 english10 english11 13WERBEH 12WERBEH

english14 english15 english16

english17 20WERBEH english19 18WERBEH
    </pre>

   <p>HE-QUOの埋め込みが、english19の右にHEBREW18を持ってきていることに注意すること。</p>

   <p>行が改行されているなら、次のようになる:</p>

   <pre class=ascii-art>
       2WERBEH 1WERBEH
  -EH 4WERBEH english3
                 5WERB

   -EH <b>7WERBEH</b> 6WERBEH
                 8WERB

english9 english10 en-
glish11 12WERBEH
13WERBEH

english14 english15
english16

english17 18WERBEH
20WERBEH english19
    </pre>

   <p>HEBREW18がenglish19の前で読まれるべきなので、HEBREW18はenglish19の上の行にある。前の書式から長い行を改行するだけではうまくいかない。english19の最初のシラブルは前の行に収まっているが、右から左の方向を持つ文中の左から右の方向を持つ言葉のハイフン、もしくはその逆のハイフンは、通常、行の途中にハイフンを表示させないために抑制されていることに注意すること。</p>
  </div>
  <!-- example -->

  <h3 id=bidi-box-model><span class=secno>2.4. </span> 双方向文中にあるインライン要素のためのボックスモデル</h3>

  <p>バイダイの再配置は論理的に連続しているテキストを分割して並び替えできるので、双方向テキスト行中のインラインボックスも分割・並び替えされうる。

  <p class=note>インラインボックスを同じ方向にフロー(流し込み)できるようにするために(全て左から右か、全て右から左)、匿名のインラインボックスが生成されることに注意すること。</p>
  <!-- CSS2.1 8.6 -->

  <p>各ラインボックスのために、ユーザーエージェントは各要素に生成されたインラインボックスを取得し、マージン・ボーダー・パディングを表示順序(論理的な順序ではない)に従い描画しなければならない。要素が登場する最初のラインボックスにある<a href="#start"><i>start</i></a>-most box(最初のボックス)は、<a href="#start"><i>start</i></a> edge's margin(開始マージン)、border(ボーダー)、padding(パディング)を持つ。要素が登場する最後のラインボックスにある end-most box(最後のボックス)は、<a
   href="#end"><i>end</i></a> edge's margin(終了マージン)、 border(ボーダー)、padding(パディング)を持つ。例えば、writing modeプロパティが&lsquo;<a href="#horizontal-tb"><code class=css>horizontal-tb</code></a>&rsquo;の場合:

  <ul>
   <li>親要素の&lsquo;<a href="#direction0"><code
    class=property>direction</code></a>&rsquo;プロパティが&lsquo;<a
    href="#ltr"><code class=css>ltr</code></a>&rsquo;なら、要素が登場する最初のラインボックスでは、一番左に生成されたボックスは左マージン、左ボーダー、左パディングを持つ。要素が登場する最後のラインボックスでは、一番右に生成されたボックスは右パディング、右ボーダー、右マージンを持つ。

   <li>親要素の&lsquo;<a href="#direction0"><code
    class=property>direction</code></a>&rsquo;プロパティが&lsquo;<a
    href="#rtl"><code class=css>rtl</code></a>&rsquo;なら、素が登場する最初のラインボックスでは、一番右に生成されたボックスは右マージン、右ボーダー、右パディングを持つ。要素が登場する最後のラインボックスでは、一番左に生成されたほとんどのボックスは左パディング、左ボーダー、左マージンを持つ。
  </ul>

  <p>これと似たルールが縦組を保っている。

  <p class=note>&lsquo;<code
   class=property>box-decoration-break</code>&rsquo;プロパティは、各ボックス両サイドにて装飾を描画するために、この振る舞いを上書きすることができる。<a
   href="#CSS3BG" rel=biblioentry>[CSS3BG]<!--{{!CSS3BG}}--></a>

  <h2 id=vertical-intro><span class=secno>3. </span> 縦書きの導入</h2>

  <p><em>この章は参考である。</em>

  <p>CSS2.1の双方向テキストサポート拡張に加えて、このモジュールはCSSでの縦書きレイアウトサポートに必要なルールとプロパティを導入している。

  <p>主に水平の文字を配置していくラテン系の文字を使用した言語とは違い、中国語や日本語のようなアジア圏の言語は文字を垂直に配置する。下の日本語の例は、同じテキストを水平と垂直それぞれに配置したものである。水平の場合は、テキストは左から右に、そして上から下へ読まれる。垂直の場合は、テキストは上から下へ、そして右から左へ読まれる。左から右へ進む水平の場合における左端からのインデントは、上から下へ進む垂直の場合に変換すると、上端からのインデントになる。

  <div class=figure>
   <p><img alt="A comparison of horizontal and vertical Japanese shows that
    although the lines rotate, the characters remain upright. Some glyphs,
    however change: a period mark shifts from the bottom left of its glyph
    box to the top right. Running headers, however, may remain laid out
    horizontally across the top of the page." src=vert-horiz-comparison.png></p>

   <p class=caption>日本語での縦書きと横書きの比較: i文庫アプリケーション(iOS)</p>
  </div>

  <p class=note>中国語と日本語の行は右から左、もしくは上から下へ並べられる。しかしモンゴル語と満州語は左から右へ並べられる。

  <p>横書きから縦書きへの変更による影響はレイアウトだけではない。組版にも影響を与えている。例えば、spacing boxに含まれる句読点は横書きから縦書きへ変更することができるが、その場合は違うグリフが使われることがある。

  <p>ラテン文字や、その他普通は横書きされる文字のテキストを含む縦書きのテキストは、その横書きされるテキストを様々な方法で表示することができる。例えば、ラテン文字を横向きに回転させたり、各文字を上向きに並べることができる:

  <div class=figure>
   <p><img alt="A dictionary definition for &#x30F4;&#x30A3;&#x30EB;&#x30B9;
    might write the English word 'virus' rotated 90&deg; clockwise, but stack
    the letters of the initialisms 'RNA' and 'DNA' upright."
    src=vert-latin-layouts.png></p>

   <p class=caption>日本語縦書き中のラテン文字の例: 大辞林 1.4(iOS)</p>
  </div>

  <p>日付の2桁数字のような特殊なケースでは、テキストが縦書き一文字分のキャラクターボックスにぴったり詰めこまれる:

  <div class=figure id=fig-mac>
   <p><img alt="An excerpt from MacFan shows several possible vertical
    layouts for numbers: the two-digit month and day are written as
    horizontal-in-vertical blocks; the years are written with each character
    upright; except in the English phrase &ldquo;for Mac 2011&rdquo;, where
    the date is rotated to match the rotated Latin."
    src=vert-number-layouts.png></p>

   <p class=caption>2010年12月のMac Fan p.49</p>
  </div>

  <p>レイアウトにはよく縦書きと横書きの要素が混ざったものがある:

  <div class=figure>
   <p><img alt="Magazines often mix horizontal and vertical layout; for
    example, using one orientation for the main article text and a different
    one for sidebar or illustrative content." src=vert-horiz-combination.png></p>

   <p class=caption>縦書き要素と横書き要素の混合</p>
  </div>

  <p>縦書きレイアウトでも双方向テキストレイアウトの処理が必要となる。例えば、時計回りに回転されたアラビア語は、下から上にレイアウトされる。

  <h3 id=writing-mode><span class=secno>3.1. </span> 行送り方向: &lsquo;<a href="#writing-mode1"><code
   class=property>writing-mode</code></a>&rsquo; プロパティ</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>名称:

     <td><dfn id=writing-mode1>writing-mode</dfn>

    <tr>
     <th>値:

     <td>horizontal-tb | vertical-rl | vertical-lr

    <tr>
     <th>初期値:

     <td>horizontal-tb

    <tr>
     <th>適用対象:

     <td>表の行グループ、表の列グループ、表の行、表の列を除く全要素

    <tr>
     <th>継承:

     <td>される

    <tr>
     <th>パーセンテージ:

     <td>N/A

    <tr>
     <th>メディア:

     <td>visual

    <tr>
     <th>算出値:

     <td>指定した値
  </table>

  <p>このプロパティは行送り方向を設定する。指定可能な値は以下:

  <dl>
   <dt><dfn id=horizontal-tb>horizontal-tb</dfn>

   <dd>行送り方向は上から下。横書き。

   <dt><dfn id=vertical-rl>vertical-rl</dfn>

   <dd>行送り方向は右から左。縦書き。

   <dt><dfn id=vertical-lr>vertical-lr</dfn>

   <dd>行送り方向は左から右。縦書き。
  </dl>

  <p>The &lsquo;<a href="#writing-mode1"><code
   class=property>writing-mode</code></a>&rsquo;プロパティは行送り方向を決定している。これがブロック書式付けコンテキストにあるブロックレベルボックスの進行を決定している。インラインを含むブロックコンテナのラインボックスの進行と、表の行の進行である。ラインボックスを積む方向が決定されるおかげで、
   &lsquo;<a href="#writing-mode1"><code
   class=property>writing-mode</code></a>&rsquo;プロパティは、このようにラインボックスが横組なのか縦組なのかも決定している。

  <p>&lsquo;<a href="#writing-mode1"><code
   class=property>writing-mode</code></a>&rsquo;プロパティは
   &lsquo;<a href="#direction0"><code
   class=property>direction</code></a>&rsquo;プロパティと共にroot要素に設定されると、ドキュメント全体の<dfn
   id=principal-writing-mode>principal writing mode(基本となる組方向)</dfn>を決定する。
   この組方向は、基本となるページ進行方向を決定したりする。(<a href="#CSS3PAGE"
   rel=biblioentry>[CSS3PAGE]<!--{{CSS3PAGE}}--></a>を参照) root要素の &lsquo;<a
   href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo;
   の値は初期包含ブロックにも伝播し、初期ブロック書式付けコンテキストの行送り方向を設定している。

  <p class=note>HTML BODY要素の&lsquo;<a href="#writing-mode1"><code
   class=property>writing-mode</code></a>&rsquo;プロパティはビューポートに伝播<em>されない</em>ことに注意すること。この特別な振る舞いはbackground と overflow プロパティにのみ適用される。

  <p>もし要素がその包含ブロックと異なる行送り方向を持っていた場合は:

  <ul>
   <li>その要素が &lsquo;<code
    class=property>display</code>&rsquo; を &lsquo;<code
    class=css>inline</code>&rsquo; にしているのなら、その &lsquo;<code
    class=property>display</code>&rsquo; は &lsquo;<code
    class=property>inline-block</code>&rsquo; となる。 <a href="#CSS21"
    rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

   <li>その要素が &lsquo;<code
    class=property>display</code>&rsquo; を &lsquo;<code
    class=css>run-in</code>&rsquo; にしているのなら、その &lsquo;<code
    class=property>display</code>&rsquo; は &lsquo;<code
    class=property>block</code>&rsquo; となる。 <a href="#CSS21"
    rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>
  </ul>

  <p>そのような要素がブロックコンテナの場合、新しいブロック書式付けコンテキストを作り出す。

  <p>置き換えられた要素のコンテンツはwriting modeによって回転しない。例では、imageは直立したままである。しかし、ユーザーエージェントがコンテンツを置換する縦書きをサポートしていた場合は、テキストを含む要素(MathMLやform要素など)の置き換えは、置き換えられた要素の組方向と行の向きに一致しなければならない。

  <div class=example>
   <p>下の例は、image(2)によって分割されている2つのブロック要素(1と3)を様々な行送り組方向で示したものである。</p>

   <p>横書きの場合 (<code>writing-mode:
    horizontal-tb</code>):</p>

   <p><img alt="Diagram of horizontal layout: blocks 1, 2, and 3 are stacked
    top-to-bottom" height=300 src=horizontal.png width=219></p>

   <p>一般的に東アジア圏で使われる右から左の縦書きの場合 (<code>writing-mode: vertical-rl</code>):</p>

   <p><img alt="Diagram of a right-to-left vertical layout: blocks 1, 2, and
    3 are arranged side by side from right to left" height=191
    src=vertical-rl.png width=297></p>

   <p>そして最後に、満州語やモンゴル語で使われる左から右の縦書きの場合 (<code>writing-mode: vertical-lr</code>):</p>

   <p><img alt="Diagram of left-to-right vertical layout: blocks 1, 2, and 3
    are arranged side by side from left to right" height=191
    src=vertical-lr.png width=300></p>
  </div>

  <div class=example>
   <p>以下の例は、&lsquo;<a href="#vertical-rl"><code
    class=css>vertical-rl</code></a>&rsquo; writing mode のブロック内でいくつかのフォームを表示させたものである。フォームの表示は writing mode と一致している。

   <pre>
<!-- -->&lt;style>
<!-- -->  form { writing-mode: vertical-rl; }
<!-- -->&lt;/style>
<!-- -->...
<!-- -->&lt;form>
<!-- -->&lt;p>&lt;label>姓名&#x3000;&lt;input value="艾俐俐">&lt;/label>
<!-- -->&lt;p>&lt;label>语文&#x3000;&lt;select>&lt;option>English
<!-- -->                       &lt;option>français
<!-- -->                       &lt;option>فارسی
<!-- -->                       &lt;option>中文
<!-- -->                       &lt;option>日本语&lt;/select>&lt;/label>
<!-- -->&lt;/form></pre>

   <p><img alt="Screenshot of vertical layout: the input element is laid
    lengthwise from top to bottom and its contents rendered in a vertical
    typographic mode, matching the labels outside it. The drop-down selection
    control after it slides out to the side (towards the after edge of the
    block) rather than downward as it would in horizontal writing modes."
    src=vertical-form.png></p>
  </div>

  <div class=example>
   <p>この例は、擬似要素 &lsquo;<code class=css>::marker</code>&rsquo;を使い、&lsquo;<a href="#writing-mode1"><code
    class=property>writing-mode</code></a>&rsquo; でリストマーカーを直立にしたものである。vertical alignmentは、長い数値(桁数が多い数値)がテキストの最初の行の右側へ配置されるようになる。<a href="#CSS3LIST"
    rel=biblioentry>[CSS3LIST]<!--{{CSS3LIST}}--></a>

   <pre>::marker { writing-mode: horizontal-tb;
<!-- -->            vertical-align: text-top;
<!-- -->            color: blue; }</pre>

   <div class=figure>
    <p><img alt="Diagram showing list markers of '1.', '2.', '3.' sitting
     upright atop sideways vertical Latin list item text." class=example
     src=vertical-horizontal-list-markers.png>

    <p class=caption>垂直リストにおける水平リストマーカーの例</p>
   </div>
  </div>

  <h4 id=svg-writing-mode><span class=secno>3.1.1. </span> SVG1.1 の &lsquo;<a
   href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo;
   の値</h4>

  <p>SVG1.1 <a href="#SVG11" rel=biblioentry>[SVG11]<!--{{!SVG11}}--></a>
   ではいくつかの値が追加で定義されている: &lsquo;<code class=css>lr</code>&rsquo;, &lsquo;<code class=css>lr-tb</code>&rsquo;, &lsquo;<code
   class=css>rl</code>&rsquo;, &lsquo;<code class=css>rl-tb</code>&rsquo;,
   &lsquo;<code class=css>tb</code>&rsquo;, &lsquo;<code
   class=css>tb-rl</code>&rsquo;である。

  <p>これらの値は、SVG1の文章を除くコンテキストでは <em>非推奨</em>とされている。CSSのコンテキストでこれらをサポートする実装は,その値を次の表のように扱う必要がある:

  <table class=data>
   <thead>
    <tr>
     <th>SVG1/Obsolete

     <th>CSS

   <tbody>
    <tr>
     <td>&lsquo;<code class=css>lr</code>&rsquo;

     <td rowspan=3>&lsquo;<a href="#horizontal-tb"><code
      class=css>horizontal-tb</code></a>&rsquo;

    <tr>
     <td>&lsquo;<code class=css>lr-tb</code>&rsquo;

    <tr>
     <td>&lsquo;<code class=css>rl</code>&rsquo;

    <tr>
     <td>&lsquo;<code class=css>tb</code>&rsquo;

     <td rowspan=2>&lsquo;<a href="#vertical-rl"><code
      class=css>vertical-rl</code></a>&rsquo;

    <tr>
     <td>&lsquo;<code class=css>tb-rl</code>&rsquo;
  </table>

  <p class=note>SVG1.1の値は、CSS &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo;の以前のリビジョンに存在していて、本仕様で廃止された。以前のリビジョンに存在していた値 &lsquo;<code
   class=css>tb-lr</code>&rsquo; は、&lsquo;<a href="#vertical-lr"><code
   class=css>vertical-lr</code></a>&rsquo;に置き換えられる。

  <p>SVG1.1では、これらの値が<dfn id=inline-progression-direction>inline progression direction(行内の進行方向)</dfn>を設定している。言い換えると、グリフが追加される度に現在のテキストの位置が進む方向である。これはバイダイの再配置<a
   href="#after"><em>後</em></a>に起こる幾何学的プロセスなので、 &lsquo;<a href="#direction0"><code
   class=property>direction</code></a>&rsquo; プロパティ(&lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; から独立している)の解釈には何の影響も及ぼさない。(<a
   href="http://www.w3.org/TR/SVG/text.html#RelationshipWithBiDirectionality">Relationship with bidirectionality</a>を参照のこと。<a href="#SVG11"
   rel=biblioentry>[SVG11]<!--{{!SVG11}}--></a>)

  <p class=note>このプロセスが "writing-mode: rl" に対して、単にテキストの文字列をシフトさせているのか、それともテキスト中の全グリフ順序を逆にしているのかは、様々な解釈がある。

  <h2 id=inline-alignment><span class=secno>4. </span> インライン要素の配置</h2>

  <p>異なる種類のインライン要素コンテンツが同じ行に配置されると、コンテンツのベースラインと &lsquo;<code class=property>vertical-align</code>&rsquo; プロパティの設定が、ラインボックスの横軸の中でインライン要素コンテンツをどう配置するかを制御する。この章では、ベースラインがどのようなもので、その見つけ方や、インライン要素の並び方を決定する &lsquo;<code class=property>vertical-align</code>&rsquo; プロパティと共にどのように使われるかを述べている。

  <h3 id=intro-baselines><span class=secno>4.1. </span> Introduction to
   Baselines</h3>

  <p><em>本章は参考である。</em>

  <p>A <dfn id=baseline>baseline(ベースライン)</dfn>は、テキストの個々のグリフが配置されたラインボックスの<i>inline axis(インライン軸)</i>に沿ったラインである。ベースラインはフォントのグリフをデザインするガイドになり(例えば、大半のアルファベット文字の底は大抵アルファベットのベースラインと一致している)、また、組版時に異なるフォントやフォントサイズのものとグリフをどう配置するかのガイドにもなる。

  <div class=figure> [ベースラインとembox(仮想ボディ)が指定されており、2つのフォントサイズがある中でのアルファベットのテキストの図]</div>

  <p>異なる表記法は異なるベースラインテーブルを選択する。

  <div class=figure>
   <p><img alt="Latin prefers the alphabetic baseline, on top of which most
    letters rest, though some have descenders that dangle below it. Indic
    scripts are sometimes typeset with a hanging baseline, since their glyph
    shapes appear to be hanging from a horizontal line. Han-based systems,
    whose glyphs are designed to fill a square, tend to align on their
    bottoms." src=script-preferred-baselines.gif></p>

   <p class=caption>さまざまな表記法におけるベースラインの選択</p>
  </div>

  <p>うまく構成されたフォントには、フォントデザインの座標空間にある1つ以上のベースラインの位置を示す <dfn id=baseline-table>ベースラインテーブル</dfn>が含まれている(デザイン座標空間はフォントサイズにより見積もられる)。

  <div class=figure>
   <p><img alt="" src=baselines.gif></p>

   <p class=caption>うまくデザインされた書式混合でのフォントの中では、グリフは、組版するときに一緒の座標空間に配置される。ベースラインテーブルはそのときグリフの形に合うように構成され、各ベースラインは選択された書式のグリフに合うように配置される</p>
  </div>

  <p>ベースラインテーブルはフォントのプロパティであり、様々なベースラインの位置はフォントの全グリフに適用される。

  <p>縦書きテキストと横書きテキストでは、異なるベースラインテーブルが提供されうる。ユーザーエージェントは、縦組では縦組用のテーブルを、横組では他のテーブルを使うべきである。

  <h3 id=text-baselines><span class=secno>4.2. </span> テキストのベースライン</h3>

  <p>この仕様では、以下のベースラインだけが考慮されている:

  <dl>
   <dt>alphabetic

   <dd>通常、<dfn id=alphabetic-baseline>alphabetic baseline</dfn>はラテン大文字グリフの底辺に沿っている。横書きの活版印刷では、優先されるベースラインである。

   <dt>central

   <dd>通常、 <dfn id=central-baseline>central baseline</dfn>は仮想ボディの中心と交わっている。縦書きの活版印刷では、優先されるベースラインである。フォントにこのベースラインが無い場合は、仮想ボディのascender(上端)(<a
    href="#over"><i>over</i></a>)とdescender(下端)(<a
    href="#under"><i>under</i></a>)の真ん中であるとみなされる。
  </dl>

  <p class=note>将来のCSSモジュールでは、さらに細かいベースラインを扱い、他の優先されるベースラインと配置オプションを選択できるようにする予定である。

  <h3 id=replaced-baselines><span class=secno>4.3. </span> 原子的なインラインベースライン</h3>

  <p>もし <a
   href="http://www.w3.org/TR/CSS21/visuren.html#inline-boxes">atomic
   inline(原子的なインライン)</a> (インラインブロックやインラインテーブル、もしくはインライン要素に置き換えられたもの) が自身のベースライン情報を提供出来ない場合は、ユーザーエージェントはこのようにベースラインテーブルを合成する:

  <dl>
   <dt>alphabetic

   <dd>alphabetic ベースラインは、<a
    href="#under"><i>under(下)</i></a> マージン辺にあると仮定される。

   <dt>central

   <dd>central ベースラインは、ボックスの <a
    href="#under"><i>under(下)</i></a> と <a href="#over"><i>over(上)</i></a> のマージン辺の真ん中にあると仮定される。
  </dl>

  <h3 id=baseline-alignment><span class=secno>4.4. </span> ベースラインの配置</h3>

  <p>CSSでは、<dfn id=dominant-baseline>dominant baseline(優先ベースライン)</dfn> (writing modeに基づいて<a href="#text-baselines">変更可能</a>) の配置時の使われ方は2つのケースがある:

  <ul>
   <li><strong>同じインラインボックスに異なるフォントのグリフを配置する場合。</strong> グリフは優先ベースラインの位置に合わせて配置される。

   <li><strong>親の中に子のinline-level boxを配置する場合。</strong>&lsquo;<a href="#baseline"><code class=css>baseline</code></a>&rsquo;の値が&lsquo;<code class=property>vertical-align</code>&rsquo;なら、子は親の箇所に、親の優先ベースラインと子の同じベースラインを一致させ配置される(例えば、親の優先ベースラインがalphabeticの場合、子の優先ベースラインがalphabeticベースライン以外であったとしても、子のalphabeticベースラインは親のalphabeticベースラインに合わされる)。&lsquo;<code class=css>sub</code>&rsquo;, &lsquo;<code class=css>super</code>&rsquo;,
    &lsquo;<code class=css>&lt;length&gt;</code>&rsquo;, &lsquo;<code
    class=css>&lt;percentage&gt;</code>&rsquo;の場合、ベースラインは &lsquo;<a href="#baseline"><code class=css>baseline</code></a>&rsquo;と同様に配置されるが、子は、 &lsquo;<code class=property>vertical-align</code>&rsquo; の値により与えられたオフセットに応じてシフトされる。

    <div class=example>
     <p>以下のマークアップをして:

     <pre>&lt;p&gt;&lt;span class="outer"&gt;Ap &lt;span class="inner"&gt;<i>ji</i>&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;</pre>

     <p>スタイルが次の場合:

     <pre>span.inner { font-size: .75em; }</pre>

     <p>親のベースラインテーブル (<code>.outer</code>) と子のベースラインテーブル (<code>.inner</code>) )はフォントサイズが異なるため一致しない。優先ベースラインがalphabeticベースラインなので、子のボックスは親のalphabeticベースラインに合わせて配置される。

     <div class=figure>
      <p><img alt="" src=baseline-align-sizes.gif>
     </div>
    </div>

    <div class=example>
     <p>上の例で、 &lsquo;<code class=css>vertical-align:
      super</code>&rsquo; を <code>.inner</code> の要素に適用した場合、親と同じ配置ルールが子の <code>.inner</code> にも使われる。唯一の違いは、ベースラインの配置に加えて、子が上付き文字の位置にシフトされることである。

     <pre>span.inner { vertical-align: super; font-size: .75em; }</pre>

     <div class=figure>
      <p><img alt="In this example, the resulting alignment is equivalent to
       shifting the parent baseline table upwards by the superscript offset,
       and then aligning the child's alphabetic baseline to the shifted
       position of the parent's alphabetic baseline."
       src=baseline-align-super.gif>
     </div>
    </div>
  </ul>

  <h2 id=intro-text-layout><span class=secno>5. </span> 縦書きテキストレイアウトの導入</h2>

  <p>どの筆記体型にも本来のテキストの方向が1つ以上ある。ゆえに、近代の書記方法はテキストの方向について3つに分類することができる:

  <dl>
   <dt>horizontal-only(水平のみ)

   <dd>本来のテキストの方向は水平のみであり、垂直はない。ラテン文字、アラビア文字、ヘブライ文字、デーヴァナーガリが該当する。

   <dt>vertical-only(垂直のみ)

   <dd>本来のテキストの方向は垂直のみであり、水平はない。モンゴル文字、パスパ文字が該当する。

   <dt>bi-orientational(水平と垂直の両方向)

   <dd>本来のテキスト方向として垂直と水平の両方がある。ハン語の文字、ハングル文字、日本語のかな文字が該当する。
  </dl>

  <p>近代の組版では、全グリフが水平方向に配置される。これはテキストを水平に配置するときに使われている。テキストを垂直に配置するためには、ユーザエージェントはテキストを水平方向から変換する必要がある。この変換は<dfn id=bi-orientational-transform>bi-orientational transform(bi-orientationalにおける変換)</dfn>であり、2つのタイプがある:

  <dl>
   <dt>rotate

   <dd>水平から垂直にグリフを回転する <a
    href="diagrams/glyph-right.svg" type="image/svg+xml"> <img alt="Rotate
    the glyph from horizontal to vertical" class=figure
    src="diagrams/glyph-right.png"></a>

   <dt>translate

   <dd>水平から垂直にグリフを変換する <a
    href="diagrams/glyph-upright.svg" type="image/svg+xml"> <img
    alt="Translate the glyph from horizontal to vertical" class=figure
    src="diagrams/glyph-upright.png"></a>
  </dl>

  <p>本来のテキスト方向として縦方向を持つ書記方法には固有のbi-orientational変換があり、それは縦書きでの方向を訂正する。例えばCJK(中国/日本/韓国)の文字変換があり、文字は常に直立状態にされる。モンゴル文字等の他の書記方法では回転させる。(固有の両方向変換は<a href="#script-orientations">付録B</a>を参照)

  <p>本来のテキスト方向として縦方向を持たない書記方法は、回転(横倒しにセットされる)か変換(直立状態にセットされる)のどちらも可能である。使用される変換は、正しさよりはむしろテキストの使われ方に応じたスタイルが優先される。&lsquo;<a href="#text-orientation0"><code class=property>text-orientation</code></a>&rsquo; プロパティの &lsquo;<a href="#upright-right"><code class=css>upright-right</code></a>&rsquo; と &lsquo;<a href="#upright"><code class=css>upright</code></a>&rsquo; の値は、水平のみのテキストを回転するのか、それとも変換するのかを指定するために用意されている。

  <p class=note> &lsquo;<a href="#text-orientation0"><code
   class=property>text-orientation</code></a>&rsquo; の値である &lsquo;<a href="#sideways-left"><code class=css>sideways-left</code></a>&rsquo;, &lsquo;<a href="#sideways-right"><code class=css>sideways-right</code></a>&rsquo;, &lsquo;<a href="#sideways"><code class=css>sideways</code></a>&rsquo; は装飾的なレイアウト効果のために、そして下から上へよむ文章のCSSサポート制限を回避するために提供されている。

  <p class=issue>理想的には、句読点は主要な書記方法が水平のみか垂直かに応じて、横倒しか直立状態にとなるべきである。しかし、この情報(書字方向のようなコンテンツのプロパティ)を我々は利用できない(縦書きのコンセプトが使われているUTN 22では、この問題に対応すべく、&lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo; 経由やHTMLの <code>dir</code> 属性で情報が与えられる)。現在の仕様では、East Asian Widthプロパティを使うことで問題に対処している。しかし、このアプローチは縦書きの書記方法が横書きのみの書記方向と句読点を共有していない場合しか有効でない。

  <h3 id=text-orientation><span class=secno>5.1. </span> テキストの方向: &lsquo;<a href="#text-orientation0"><code
   class=property>text-orientation</code></a>&rsquo; プロパティ</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>名称:

     <td><dfn id=text-orientation0>text-orientation</dfn>

    <tr>
     <th>値:

     <td>upright-right | upright | sideways-right | sideways-left | sideways
      | use-glyph-orientation

    <tr>
     <th>初期値:

     <td>upright-right

    <tr>
     <th>適用対象:

     <td>表の行グループ、表の列グループ、表の行、表の列を除く全要素

    <tr>
     <th>継承:

     <td>される

    <tr>
     <th>パーセンテージ:

     <td>N/A

    <tr>
     <th>メディア:

     <td>visual

    <tr>
     <th>算出値:

     <td>指定した値
  </table>

  <p>このプロパティは行中の文字の向きを指定し、行の向きを設定する。現在の値はvertical writing modeの時のみ有効である。

  <p>読みやすさを考慮し、本章では<a href="#character"><i>character(文字)</i></a>という言葉を <em>extended grapheme cluster(書記素クラスタ)</em> の意味で使用する。<a href="#character-properties">Characters and Properties</a>に詳細が記述されている。

  <p>この値の意味を以下に示す:

  <dl>
   <dt><dfn id=upright-right>upright-right</dfn>

   <dd>
    <p>縦書きでは、horizontal-onlyの表記方法で使われていた文字は横倒しになる。言い換えると、横書きの一般的な文字の向きから90度時計回りに回転される。

    <p>縦書きでは、この値は<i>vertical typographic mode</i>の要素に設定され、これが縦書きの表記方法の主要なレイアウトの典型例となる。

   <dt><dfn id=upright>upright</dfn>

   <dd>
    <p>縦書きでは、horizontal-onlyの表記方法で使われていた文字は直立状態となる。言い換えると、これは横書きの一般的な文字の向きでである。これらの表記方法からの文字整形は孤立した形となる。垂直の表記方法で使われている文字はそれ固有の文字方向に設定され、形も普通である。可能であれば、縦書き用グリフと縦書きフォントのメトリクスがテキストに設定される。ユーザーエージェントは何も持たない書記素クラスタのために、縦書き用フォントのメトリクスを合成しなければならない。

    <p>バイダイの再配置のために、この値は全ての文字をstrong LTRとして扱わせている。この値は、&lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo; の値 &lsquo;<a href="#ltr"><code class=css>ltr</code></a>&rsquo; が使われる原因となっている。

    <p>縦書きでは、この値は<i>vertical typographic mode</i>の要素に設定される。

   <dt><dfn id=sideways-right>sideways-right</dfn>

   <dd>
    <p>縦書きでは、この値はテキストを水平レイアウト(横書き用グリフとメトリクスを使用する)にセットするが、時計回りに90度回転される。この値は <i>horizontal typographic mode</i>の要素に設定される。

   <dt><dfn id=sideways-left>sideways-left</dfn>

   <dd>
    <p>縦書きでは、この値はテキストを水平レイアウト(横書き用グリフとメトリクスを使用する)にセットするが、反時計回りに90度回転される。この値は<i>horizontal typographic mode</i>の要素に設定される。

    <p>親が &lsquo;<a href="#sideways-left"><code class=css>sideways-left</code></a>&rsquo; でないものがインライン非置換要素に設定された場合は、bidi isolationが強制される: &lsquo;<a href="#unicode-bidi0"><code class=property>unicode-bidi</code></a>&rsquo; の値が &lsquo;<a href="#normal"><code class=css>normal</code></a>&rsquo; と &lsquo;<a href="#embed"><code class=css>embed</code></a>&rsquo; なら、算出値は &lsquo;<a href="#isolate"><code class=css>isolate</code></a>&rsquo; となり、&lsquo;<a href="#bidi-override"><code class=css>bidi-override</code></a>&rsquo; なら算出値は &lsquo;<code class=css>bidi-override isolate</code>&rsquo; となる。インラインの先祖(ブロックコンテナのルートインラインを含む)から伝播したテキスト装飾の位置は鏡像関係にならないが、要素によって導入されたテキスト装飾には鏡像関係となったベースラインテーブルを用いて位置付けが行われる。

    <p>同様に、要素のインライン子要素の &lsquo;<a href="#text-orientation0"><code class=property>text-orientation</code></a>&rsquo; の値が &lsquo;<a href="#sideways-left"><code class=css>sideways-left</code></a>&rsquo; 以外であった場合、相似の変換(そしてbidi isolation)が適用される。

   <dt><dfn id=sideways>sideways</dfn>

   <dd>
    <p>この値はwriting modeが &lsquo;<a href="#vertical-rl"><code class=css>vertical-rl</code></a>&rsquo; の場合に &lsquo;<a href="#sideways-right"><code class=css>sideways-right</code></a>&rsquo; を指定したとき、またwriting modeが &lsquo;<a href="#vertical-lr"><code class=css>vertical-lr</code></a>&rsquo; の場合に &lsquo;<a href="#sideways-left"><code class=css>sideways-left</code></a>&rsquo; を指定したときと同じである。横組のみのドキュメントを縦組にするときに役立つ。

   <dt><dfn id=use-glyph-orientation>use-glyph-orientation</dfn>

   <dd>
    <p><a href="#SVG11" rel=biblioentry>[SVG11]<!--{{!SVG11}}--></a> ではテキストの方向をコントロールすることを目的とした &lsquo;<code class=property>glyph-orientation-vertical</code>&rsquo; プロパティと &lsquo;<code class=property>glyph-orientation-horizontal</code>&rsquo; プロパティを定義している。これらのプロパティは<em>非推奨</em>とされており、非SVGエレメントには適用されない。実装がこれらのプロパティをサポートしている場合、SVG要素に &lsquo;<a href="#use-glyph-orientation"><code class=css>use-glyph-orientation</code></a>&rsquo; が設定されると、SVGの &lsquo;<code class=property>glyph-orientation-vertical</code>&rsquo; プロパティと &lsquo;<code class=property>glyph-orientation-horizontal</code>&rsquo; プロパティがテキストのレイアウトをコントロールする。これらを実装したユーザーエージェントは、SVG用のデフォルトユーザーエージェントスタイルシートとして、 &lsquo;<code class=css>text-orientation: glyph-orientation</code>&rsquo; を全ての<a href="http://www.w3.org/TR/SVG/intro.html#TermTextContentElement">SVGテキストコンテンツ要素</a>に設定しなければならない。
  
    <p>その他全てのコンテンツと、glyph orientation プロパティをサポートしていない実装においては、&lsquo;<a href="#use-glyph-orientation"><code class=css>use-glyph-orientation</code></a>&rsquo; は &lsquo;<a href="#upright-right"><code class=css>upright-right</code></a>&rsquo; と同様に振る舞う。

    <p class=note>この値は抜ける恐れがあるもので、おそらくCRまでには落とされるだろう。
  </dl>

  <div class=figure>
   <table>
    <tbody>
     <tr>
      <td> <img alt="text-orientation: upright-right" height=160
       src=text-orientation-vr.png width=64>

      <td> <img alt="text-orientation: upright" height=160
       src=text-orientation-up.png width=64>

      <td> <img alt="text-orientation: sideways-left" height=160
       src=text-orientation-sl.png width=64>

      <td> <img alt="text-orientation: sideways-right" height=160
       src=text-orientation-sr.png width=64>

     <tr>
      <td>&lsquo;<a href="#upright-right"><code
       class=css>upright-right</code></a>&rsquo;

      <td>&lsquo;<a href="#upright"><code class=css>upright</code></a>&rsquo;

      <td>&lsquo;<a href="#sideways-left"><code
       class=css>sideways-left</code></a>&rsquo;

      <td>&lsquo;<a href="#sideways-right"><code
       class=css>sideways-right</code></a>&rsquo;
   </table>

   <p class=caption>&lsquo;<a href="#text-orientation0"><code
    class=property>text-orientation</code></a>&rsquo; の値 (&lsquo;<a
    href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo;
    が &lsquo;<a href="#vertical-rl"><code
    class=css>vertical-rl</code></a>&rsquo; の場合)</p>
  </div>

    <p>一般的なもの、継承されたもの、未知のカテゴリの文章に属する文字の向きは<a href="#vertical-typesetting-details">Appendix C</a>に定義されている。<span class=issue>このルールに対するフィードバックを募集しています</span>

  <p class=issue>フォントのデータに依存しない全ユニコード文字の向きに関する定義の明快な標準定義が必要である。

   <p>横組のみのドキュメントのルート要素に、 &lsquo;<a href="#sideways"><code class=css>sideways</code></a>&rsquo; が設定された例を以下に示す。著者はテキストが &lsquo;<a href="#vertical-rl"><code class=css>vertical-rl</code></a>&rsquo; か &lsquo;<a href="#vertical-lr"><code class=css>vertical-lr</code></a>&rsquo; かを気にすることなく、ドキュメントの &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; を適切に設定することができる。

   <pre>
      :root { text-orientation: sideways; }
      caption { caption-side: left; writing-mode: vertical-lr; }
      thead th { writing-mode: vertical-lr; }
      h1.banner { position: absolute; top: 0; right: 0; writing-mode: vertical-rl; }
    </pre>
  </div>

  <h2 id=abstract-box><span class=secno>6. </span> 抽象ボックスの用語</h2>

  <p><a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a> では、ボックスレイアウトモデルが詳細に定義されている。しかし、writing modeが &lsquo;<a href="#horizontal-tb"><code class=css>horizontal-tb</code></a>&rsquo; の場合しか定義していない。方向と次元を抽象的かつ適当に置き換えていれば、&lsquo;<a href="#horizontal-tb"><code class=css>horizontal-tb</code></a>&rsquo; 以外のwriting modeでのCSSボックスレイアウトはCSS2.1のボックスレイアウトと似たものになる。本章では他のwriting mode用ボックスレイアウトを定義するために抽象的な方向と次元の用語、そしてそれらのマッピングを定義し、レイアウトの概念を抽象化する将来の機能のための用語を提供する。

  <h3 id=abstract-dimensions><span class=secno>6.1. </span> 論理的な次元</h3>

  <dl>
   <dt><dfn id=block-flow-dimension>block flow dimension</dfn>

   <dd>行のテキスト送り方向に垂直な次元で、横組では<i>vertical dimension(垂直方向の次元)</i>、縦組では<i>horizontal dimension(水平方向の次元)</i>となる。

   <dt><dfn id=inline-dimension>inline dimension</dfn>

   <dd>行のテキスト送り方向に水平な次元で、横組では<i>horizontal dimension(水平方向の次元)</i>、縦組では<i>vertical dimension(垂直方向の次元)</i>となる。

   <dt><dfn id=inline-axis>inline-axis</dfn>

   <dd>block flow dimensionの軸。例えば、横組では<i>vertical axis(垂直軸)</i>であり、縦組では<i>horizontal axis(水平軸)</i>となる。

   <dt><dfn id=block-axis>block-axis</dfn>

   <dd>inline dimensionの軸。例えば、横組では<i>horizontal axis(水平軸)</i>であり、縦組では<i>vertical axis(垂直軸)</i>となる。

   <dt><dfn id=extent>extent</dfn> or <dfn id=logical-height>logical
    height</dfn>

   <dt>

   <dd>block flow dimensionの寸法で、横組みでは物理的な高さ(vertical dimension)を参照し、縦組みでは物理的な幅(horizontal dimension)を参照する。

   <dt><dfn id=measure>measure</dfn> or <dfn id=logical-width>logical
    width</dfn>

   <dt>

   <dd>inline dimensionの寸法で、横組みでは物理的な幅(horizontal dimension)を参照し、縦組みでは物理的な高さ(vertical dimension)を参照する。(<a href="#measure"><i>measure</i></a> という用語は <a href="http://en.wikipedia.org/wiki/Measure_%28typography%29">typography</a> の用語に由来する)
  </dl>

  <h3 id=abstract-directions><span class=secno>6.2. </span> 抽象的で物理的な方向</h3>

  <p><dfn id=left>left</dfn>, <dfn id=right>right</dfn>, <dfn id=top>top</dfn>, and <dfn id=bottom>bottom</dfn> という用語は、例えばページとは独立した組方向に対しても、常に物理的に解釈される。2つの抽象的なマッピングはこれらの方向を可能にする。line-relativeとflow-relativeである。定義を以下に示す。

  <p>これらの用語はテキストの振る舞いに由来するが、これらの方向を表す言葉はラインボックスを全く含まないボックスのためにも存在している。これらは &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; プロパティ、&lsquo;<a href="#text-orientation0"><code class=property>text-orientation</code></a>&rsquo; プロパティ、&lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo; プロパティの値から直接算出される。

  <h3 id=line-directions><span class=secno>6.3. </span> 行相対の方向</h3>

  <p>&lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; により決まる行送り方向は、行の方向が水平か垂直かを決定するが、それは行内のコンテンツがどう配置されるかについて何も決定していない。

  <p><dfn id=line-relative-directions>line-relative directions</dfn> には<a href="#over"><i>over</i></a>, <a href="#under"><i>under</i></a>, <a href="#line-left"><i>line-left</i></a>, <a href="#line-right"><i>line-right</i></a>がある。 &lsquo;<a href="#text-orientation0"><code class=property>text-orientation</code></a>&rsquo; と &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo;との組み合わせから得られる <dfn id=line-orientation>line orientation</dfn>は、行のどちら側が "top" であるかを決定する。よって、行の<dfn id=under>under</dfn> (ascender側)と <dfn id=over>over</dfn> (descender側)が決まる。行の方向は行の横軸における配置(&lsquo;<code class=property>vertical-align</code>&rsquo;)に影響する。

  <p>行の方向が垂直であるline boxには、<a href="#over"><i>over</i></a> と <a href="#under"><i>under</i></a> に加え、"left" と "right" がある。それらがボックスの端である <a href="#line-left"><i>line-left</i></a> と <a href="#line-right"><i>line-right</i></a> である(行の物理的な左側と右側とは異なる)。ボックスの <dfn id=line-left>line-left</dfn> の端は名目上 <abbr title=left-to-right>LTR</abbr> のテキストが開始される端となっている。ボックスの <dfn id=line-right>line-right</dfn> の端は名目上 <abbr title=right-to-left>RTL</abbr> のテキストが開始される端となっている。 &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; プロパティと &lsquo;<a href="#text-orientation0"><code class=property>text-orientation</code></a>&rsquo; プロパティによって、ボックスのline-left側は物理的な左、上、下となりうる。

  <div class=figure> <a href="diagrams/line-orient-up.svg"
   type="image/svg+xml"> <img alt="Line orientation compass" class=landscape
   src="diagrams/line-orient-up.png"></a>
   <p class=caption>行方向のコンパス</p>
  </div>

  <div class=figurepair>
   <div class=figure> <a href="diagrams/line-orient-right.svg"
    type="image/svg+xml"> <img alt="Typical orientation in vertical"
    class=portrait src="diagrams/line-orient-right.png"></a>
    <p class=caption>縦組の典型的な方向</p>
   </div>

   <div class=figure> <a href="diagrams/line-orient-left.svg"
    type="image/svg+xml"> <img alt="Line orientation with ''text-orientation:
    sideways-left''" class=portrait src="diagrams/line-orient-left.png"></a>
    <p class=caption>&lsquo;<code class=css>text-orientation: sideways-left</code>&rsquo; のときの行方向</p>
   </div>
  </div>

  <p class=note><a href="#over"><i>over</i></a> と <a href="#under"><i>under</i></a> の directions はよく <a href="#before">before</a> と <a href="#after">after</a> を同じ方向にマッピングするが、そのマッピングは &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; と &lsquo;<a href="#text-orientation0"><code class=property>text-orientation</code></a>&rsquo; の組み合わせによって逆になることに注意すること。

  <h3 id=logical-directions><span class=secno>6.4. </span> 送り相対の方向</h3>

  <p><dfn id=flow-relative-directions>flow-relative directions(送り相対の方向)</dfn> は <a href="#before">before</a>, <a href="#after">after</a>, <a href="#start">start</a>, <a href="#end">end</a>からなる。<abbr title=left-to-right>LTR</abbr> &lsquo;でwriting modeが <a href="#horizontal-tb"><code class=css>horizontal-tb</code></a>&rsquo; であれば、対応するdirectionはそれぞれtop、bottom、left、rightとなる。

  <p>ボックスの <dfn id=before>before</dfn> の端は、名目上ブロック進行の手前の端になり、&lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; プロパティで決定される。同様に <dfn id=after>after</dfn> の端はブロック進行の後ろ端になる。

  <p>ボックスの <dfn id=start>start</dfn> の端は、名目上テキストの字詰めが始まる端になる。&lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo; の値が &lsquo;<a href="#ltr"><code class=css>ltr</code></a>&rsquo;であるボックスでは、<a href="#line-left"><i>line-left</i></a> の端になる。&lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo; の値が &lsquo;<a href="#rtl"><code class=css>rtl</code></a>&rsquo;であるボックスでは、<a href="#line-right"><i>line-right</i></a> の端になる。startの端と向かい合わせが <dfn id=end>end</dfn> の端になる。

  <p class=note> &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; プロパティだけに依存してボックスの <a href="#before"><i>before</i></a> と <a href="#after"><i>after</i></a> を決定しているが、ボックスの <a href="#start"><i>start</i></a> と <a href="#end"><i>end</i></a> の端は &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; プロパティだけでなく &lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo; プロパティ<em>と</em> &lsquo;<a href="#text-orientation0"><code class=property>text-orientation</code></a>&rsquo; プロパティにも依存していることに注意すること。

  <div class=example>
   <p>英語のブロック (LTR-TB):</p>

   <pre class=ascii-art>
                  &lt;----- width / measure  -----&gt;

                             top side/
                            before side
                  +------------------------------+                  A
      left side/  |   ---inline direction --->   |  right side/     |
      start side  |  |                           |  end side        |
                  |  | block      * horizontal * |                height/
                  |  | direction  *writing mode* |                extent
                  |  V                           |                  |
                  +------------------------------+                  V
                             bottom side/
                              after side
    </pre>
  </div>

  <div class=example>
   <p>日本語の縦書きブロック (TTB-RL):</p>

   <pre class=ascii-art>
                  &lt;----- width / extent ------&gt;

                             top side/
                            start side
                  +------------------------------+                  A
      left side/  |    &lt;---block direction---    |  right side/     |
      after side  |                           |  |  before side     |
                  |  *  vertical  *     inline|  |                height/
                  |  *writing mode*  direction|  |                measure
                  |                           V  |                  |
                  +------------------------------+                  V
                            bottom side/
                             end side
    </pre>
  </div>

  <h3 id=logical-to-physical><span class=secno>6.5. </span>
   抽象と物理のマッピング</h3>

  <p>抽象と物理をマッピングし要約した表を以下に示す:

  <table class="complex data">
   <caption>抽象-物理マッピング</caption>

   <colgroup class=header></colgroup>

   <colgroup span=10></colgroup>

   <thead>
    <tr>
     <th scope=row>&lsquo;<a href="#writing-mode1"><code
      class=property>writing-mode</code></a>&rsquo;

     <th colspan=2>&lsquo;<a href="#horizontal-tb"><code
      class=css>horizontal-tb</code></a>&rsquo;

     <th colspan=4>&lsquo;<a href="#vertical-rl"><code
      class=css>vertical-rl</code></a>&rsquo;

     <th colspan=4>&lsquo;<a href="#vertical-lr"><code
      class=css>vertical-lr</code></a>&rsquo;

    <tr>
     <th scope=row>&lsquo;<a href="#text-orientation0"><code
      class=property>text-orientation</code></a>&rsquo;

     <th colspan=2>&mdash;

     <th colspan=2>&lsquo;<a href="#sideways-left"><code
      class=css>sideways-left</code></a>&rsquo;

     <th colspan=2><abbr title="upright-right, upright,
      sideways-right">*right</abbr>

     <th colspan=2>&lsquo;<a href="#sideways-left"><code
      class=css>sideways-left</code></a>&rsquo;

     <th colspan=2><abbr title="upright-right, upright,
      sideways-right">*right</abbr>

    <tr>
     <th scope=row>&lsquo;<a href="#direction0"><code
      class=property>direction</code></a>&rsquo;

     <th>&lsquo;<a href="#ltr"><code class=css>ltr</code></a>&rsquo;

     <th>&lsquo;<a href="#rtl"><code class=css>rtl</code></a>&rsquo;

     <th>&lsquo;<a href="#ltr"><code class=css>ltr</code></a>&rsquo;

     <th>&lsquo;<a href="#rtl"><code class=css>rtl</code></a>&rsquo;

     <th>&lsquo;<a href="#ltr"><code class=css>ltr</code></a>&rsquo;

     <th>&lsquo;<a href="#rtl"><code class=css>rtl</code></a>&rsquo;

     <th>&lsquo;<a href="#ltr"><code class=css>ltr</code></a>&rsquo;

     <th>&lsquo;<a href="#rtl"><code class=css>rtl</code></a>&rsquo;

     <th>&lsquo;<a href="#ltr"><code class=css>ltr</code></a>&rsquo;

     <th>&lsquo;<a href="#rtl"><code class=css>rtl</code></a>&rsquo;

   <tbody>
    <tr>
     <th scope=row>extent

     <td colspan=2>height

     <td colspan=8>width

    <tr>
     <th scope=row>measure

     <td colspan=2>width

     <td colspan=8>height

    <tr>
     <th scope=row>before

     <td colspan=2>top

     <td colspan=4>right

     <td colspan=4>left

    <tr>
     <th scope=row>after

     <td colspan=2>bottom

     <td colspan=4>left

     <td colspan=4>right

    <tr>
     <th scope=row>start

     <td>left

     <td>right

     <td>bottom

     <td>top

     <td>top

     <td>bottom

     <td>bottom

     <td>top

     <td>top

     <td>bottom

    <tr>
     <th scope=row>end

     <td>right

     <td>left

     <td>top

     <td>bottom

     <td>bottom

     <td>top

     <td>top

     <td>bottom

     <td>bottom

     <td>top

   <tbody>
    <tr>
     <th scope=row>over

     <td colspan=2>top

     <td colspan=2>left

     <td colspan=2>right

     <td colspan=2>left

     <td colspan=2>right

    <tr>
     <th scope=row>under

     <td colspan=2>bottom

     <td colspan=2>right

     <td colspan=2>left

     <td colspan=2>right

     <td colspan=2>left

    <tr>
     <th scope=row>line-left

     <td colspan=2>left

     <td colspan=2>bottom

     <td colspan=2>top

     <td colspan=2>bottom

     <td colspan=2>top

    <tr>
     <th scope=row>line-right

     <td colspan=2>right

     <td colspan=2>top

     <td colspan=2>bottom

     <td colspan=2>top

     <td colspan=2>bottom
  </table>

  <h2 id=abstract-layout><span class=secno>7. </span> 抽象的なボックスレイアウト</h2>

  <h3 id=vertical-layout><span class=secno>7.1. </span> 縦組でのレイアウト原則</h3>

  <p>縦組でのCSSボックスレイアウトは横組のレイアウトに似ており、以下に示す原則の概要に従う:

  <p>横組にて水平次元に適用されるレイアウトの算出ルール(CSS2.1のSection 10.3のものなど)は、縦組の垂直次元へ適用される。同様に、横組にて垂直次元に適用されるレイアウト算出ルール(CSS2.1のSection 10.6のものなど)は、縦組の水平次元に適用される。従って:

  <ul>
   <li>
    <p>幅を参照するレイアウトルールは、代わりに高さを使用する。その逆も同様。

   <li>
    <p>&lsquo;<code class=css>*-left</code>&rsquo; と &lsquo;<code class=css>*-right</code>&rsquo; のボックスプロパティ(border, margin, padding)を参照するレイアウトルールは、代わりに &lsquo;<code class=css>*-top</code>&rsquo; と &lsquo;<code class=css>*-bottom</code>&rsquo; を使用する。その逆も同様。ボックスのどちらのサイドのプロパティは、変更せずに適用される。値を入力した側のみレイアウトの算出値が変化する。例えば、&lsquo;<code class=property>margin-left</code>&rsquo; プロパティはまだ左側のマージンに影響している。しかし、writing modeが &lsquo;<a href="#vertical-rl"><code class=css>vertical-rl</code></a>&rsquo; の場合は &lsquo;<code class=property>margin-bottom</code>&rsquo; の代わりにmargin collaspe(マージンの折りたたみ)が発生する。</p>

   <li>
    <p>左と右のどちらかを選択する &lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo; プロパティに依存するレイアウトルール(例えば、overflow、overconstraint resolution、&lsquo;<code class=property>text-align</code>&rsquo; の初期値、表の列順序)は、<a href="#start">start</a> と <a href="#end">end</a> に抽象化されて、適切に適用される。
  </ul>

  <div class=example>
   <p>例えば、縦組では表の行が垂直で、表の列が水平になる。&lsquo;<a href="#vertical-rl"><code class=css>vertical-rl</code></a>&rsquo; &lsquo;<a href="#upright-right"><code class=css>upright-right</code></a>&rsquo; &lsquo;<a href="#rtl"><code class=css>rtl</code></a>&rsquo;の表では、最初の列が底辺(the start side)になり、最初の行が右(the before side)になる。表の &lsquo;<code class=property>margin-right</code>&rsquo; と &lsquo;<code class=property>margin-left</code>&rsquo; はbefore側(右側)のマージンとafter側(左側)のマージンとしてそれぞれ折りたたまれる。もし表が &lsquo;<code class=property>margin-top</code>&rsquo; と &lsquo;<code class=property>margin-bottom</code>&rsquo; の値を &lsquo;<code class=css>auto</code>&rsquo; としていたなら、行送り方向からみて垂直にセンタリングされる。

   <div class=figure>
    <p><a href="diagrams/vertical-table.svg" type="image/svg+xml"> <img
     alt="Diagram of a vertical-rl upright-right rtl table in a vertical
     block formatting context, showing the ordering of rows, cells, and
     columns as described above." class=example
     src="diagrams/vertical-table.png"></a>

    <p class=caption>&lsquo;<a href="#vertical-rl"><code
     class=css>vertical-rl</code></a>&rsquo; RTL writing mode での表</p>
   </div>
  </div>

  <p>たとえばテキストの配列、フローティング、リストマーカーの配置のような、主にラインボックスの右側や左側、横方向の平行線を参照するために、topやbottomに相当するものを持っていない機能は、<a href="#line-left">line left</a> と <a href="#line-right">line right</a> を右側と左側としてそれぞれ参照している。
  
  <p>同様に、アンダーライン、オーバーライン、baseline alignment (残念ながら名前は &lsquo;<code class=property>vertical-align</code>&rsquo;)のような、主にラインボックスの上側や下側、縦方向の水平線を参照するために、左や右に相当するものをもっていない機能は、<a href="#over">over</a> と <a href="#under">under</a> を上側と下側としてそれぞれ参照している。

  <p>マッピングの詳細は以下を参照のこと。

  <h3 id=dimension-mapping><span class=secno>7.2. </span> 次元のマッピング</h3>
  <!--
  <p>Properties that are named in terms of the x and y axes are
    logical with respect to the block flow direction rather than absolute
    with respect to the page. Specifically:

  <ul>
    <li>The ''repeat-x'' keyword of 'background-repeat' tiles in the
      inline dimension of the element, which is not necessarily the
      horizontal dimension. [[!CSS21]] [[!CSS3BG]]
    <li>The ''repeat-y'' keyword of 'background-repeat' tiles in the
      block flow dimension of the element, which is not necessarily
      the vertical dimension. [[!CSS21]] [[!CSS3BG]]
    <li>The 'overflow-x' property controls overflow in the inline
      dimension of the element. [[!CSS3UI]]
    <li>The 'overflow-y' property controls overflow in the block
      flow dimension of the element. [[!CSS3UI]]
  </ul>
-->

  <p>いくつかのプロパティは以下のように論理的に振る舞う:

  <ul>
   <li>&lsquo;<code class=property>border-spacing</code>&rsquo; プロパティの1つめと2つめの値は、それぞれ行と列の間のスペースを表し、水平方向と垂直方向のスペーシングであるとは限らない。<a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

   <li>&lsquo;<code class=property>line-height</code>&rsquo; プロパティは常に論理的な高さを参照している。<a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>
  </ul>

  <p>高さのプロパティ(&lsquo;<code class=property>height</code>&rsquo;,
   &lsquo;<code class=property>min-height</code>&rsquo;, &lsquo;<code
   class=property>max-height</code>&rsquo;)は物理的な高さを参照しており、幅のプロパティ(&lsquo;<code class=property>width</code>&rsquo;,
   &lsquo;<code class=property>min-width</code>&rsquo;, &lsquo;<code
   class=property>max-width</code>&rsquo;)は物理的な幅を参照している。しかし、ボックスの次元を算出する際に使われるルールは論理的なものである。
  
  <p><a href="http://www.w3.org/TR/CSS21/visudet.html#Computing_widths_and_margins">CSS2.1 Section 10.3</a>の算出ルールがインライン次元の寸法に使われている場合、そのルールは寸法(物理的な幅または物理的な高さの場合がある)、開始と終了のマージン、およびborderに適用される。同様に、<a href="http://www.w3.org/TR/CSS21/visudet.html#Computing_heights_and_margins">CSS2.1 Section 10.6</a>の算出ルールがブロック次元の寸法に使われている場合、そのルールは範囲、beforeマージン、afterマージン、パディング、borderに適用される。<a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>
  
  <p>当然の結果として、CSS2.1では包含ブロック幅から常に相対的に算出されている、マージンとパディングのプロパティにおけるパーセンテージは、CSS3では包含ブロックの <a href="#measure"><em>measure(寸法)</em></a>から相対的に算出されることになる。

  <h3 id=orthogonal-flows><span class=secno>7.3. </span> 送り方向が直交する場合</h3>

  <pある要素が包含ブロックと異なる &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; を持つケースは2つ考えられる:

  <ul>
   <li>2つのwriting modeがお互い平行である。(例えば &lsquo;<a href="#vertical-rl"><code class=css>vertical-rl</code></a>&rsquo; と &lsquo;<a href="#vertical-lr"><code class=css>vertical-lr</code></a>&rsquo;)

   <li>2つのwriting modeがお互い垂直である。(例えば &lsquo;<a href="#horizontal-tb"><code class=css>horizontal-tb</code></a>&rsquo; と &lsquo;<a href="#vertical-rl"><code class=css>vertical-rl</code></a>&rsquo;)

  </ul>

  <p>2つめのケースを取り扱うため、CSSのレイアウト算出は2フェーズに分かれる: ボックスのサイズ決定と、そのflowの中でのボックスの配置である。サイズ決定フェーズ&#8212;ボックスの幅と高さの算出を行う&#8212;では、ボックスの次元と包含ブロックが、measure、extent、要素のwriting modeに応じて計算された算出値にマッピングされる。配置フェーズ&#8212;オフセット、マージン、ボーダー、パディングの算出を行う&#8212;では、ボックスの次元と包含ブロックが、measure、extent、包含ブロックのwriting modeに応じて計算された算出値にマッピングされる。

  <p>例えば、縦組のブロックが横組のブロックの中に配置されている場合は、小ブロックの物理的高さ(measureである)が算出されるとき、親ブロックの物理的高さはmeasureではなくextentであるにもかかわらず、親ブロックの物理的高さがこの包含ブロックのmeasure算出に利用される。

  <p>auto marginは包含ブロックのwriting modeと矛盾がないように解決されているので、送り方向が直交するブロックは、ちょうどauto marginを利用する別のブロックレベル要素のように、包含ブロックの中で一度サイズを決定し、整列かセンタリングを実施することができる。

  <p>CSSにおける包含ブロックでは一般的にmeasureが定義されているが、extentは定義されていない。これは通常CSS2.1で包含ブロックのheightが &lsquo;<code class=css>auto</code>&rsquo; のときに発生する。例を挙げると、<a href="http://www.w3.org/TR/CSS21/visudet.html#blockwidth">10.3.3</a>によって幅が計算されるが、extentはその内容に依存する。このようなケースでは <dfn id=available-measure>available measure</dfn> が包含ブロックのmeasureとして定義される。しかし、<dfn id=available-extent>available extent</dfn>(なければ包含ブロックのextent)は無限になる。

  <p>送り方向が直交する場合は、反対の事象が発生するようになる。 <a href="#available-extent"><i>available extent</i></a> が定義されるが、<a href="#available-measure"><i>available measure</i></a> は無限になる。このようなケースでは、包含ブロックのmeasureにおけるパーセンテージは定義できないので、初期包含ブロックのサイズがこのようなパーセンテージを計算するための <a href="#fallback-measure"><i>fallback measure</i></a> として代わりに使用される。

  <h4 id=orthogonal-auto><span class=secno>7.3.1. </span> 送り方向が直交する場合のオートサイジング</h4>

  <p>送り方向が直交する要素のmeasureが &lsquo;<code class=css>auto</code>&rsquo; の場合は、measureは初期包含ブロックのavailable measureサイズを使った <a href="#fit-content"><i>fit-content</i></a> (shrink-to-fit(縮めて合わせる)) で計算される。

  <h4 id=orthogonal-multicol><span class=secno>7.3.2. </span> 送り方向が直交する場合のマルチカラムレイアウト</h4>

  <p>ユーザエージェントがマルチカラムをサポートしているなら <a href="#CSS3COL"
   rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a>、要素のextentかavailable extentが定義されているが、要素のmeasureが &lsquo;<code class=css>auto</code>&rsquo;の場合は以下のようになる:

  <ol>
   <li>&lsquo;<code class=property>column-count</code>&rsquo; と &lsquo;<code class=property>column-width</code>&rsquo; が両方とも &lsquo;<code class=css>auto</code>&rsquo; なら、使用される &lsquo;<code class=property>column-width</code>&rsquo; は <a href="#available-measure"><i>available measure</i></a> の <a href="#fallback-measure"><i>fallback measure</i></a> として使っている <a href="#fill-available-measure"><i>fill-available measure</i></a> として計算される。

   <li>列のextentが固定されていない場合、要素の <a href="#fill-available-extent"><i>fill-available extent</i></a> が使われる。

   <li>使用される列数は、要素のコンテンツによって満たされた列から得られる。
  </ol>

  <p>結果、マルチカラム要素で使用されるmeasureが計算される。マルチカラム要素内で、コンテンツの折り返しや改ページもない場合は、使用されるmeasureは要素のコンテンツの <a href="#max-content-measure"><i>max-content measure</i></a> となる。そうでなければ使用される列幅、列数、列間の幅から計算される。

  <p>要素で使用されるextentは、使用される列のextent(もし複数カラムが使われて居たなら)か、コンテンツの <a href="#max-content-extent"><i>max-content extent</i></a> のどちらかとなる。

  <p class=note>これはオーバーフローしたコンテンツを除き、前のセクションで定義したオートサイジングのアルゴリズムと同じ振る舞いをすべきである。包含ブロックの側から離れていこうとする代わりに、包含ブロックの送り方向が列としてひとまとめにされることで、T字型のドキュメントとなるのを回避している。
  
  <h4 id=orthogonal-pagination><span class=secno>7.3.3. </span> 送り方向が直交する場合の改ページ</h4>

  <p><em>この章は参考である。</em>

  <p>改ページについては、CSS2.1のルールが縦組や送り方向が直交する場合においてもそのまま使われている: ラインボックス内で改ページの機会はなく、改ページはラインボックス間のみである。 しかし、<a href="#CSS3COL" rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a> をサポートするユーザーエージェントは、列の間(幅が0となる可能性がある)で改行することがある。

  <p>もしルート要素によって作られた改ページの流れからコンテンツが外に溢れた場合は、ユーザエージェントはそのコンテンツを表示する必要がないことに注意すること。長いテキストで組方向を混在させたい作者は、ドキュメントの改ページ方向に送られる全てのコンテンツを表示させるために、CSS columnsの利用を推奨する。

  <div class=note>
   <p>言い換えると、あなたのドキュメントが2つのスクロールバーを必要とする場合、その文書はおそらく全て表示されない。全てを確実に表示させたいなら、例えば <a href="http://www.w3.org/TR/css3-multicol/">columns</a> を利用してレイアウトの固定し、全てのスクロール(そして改ページも)を1つの方向にすること。T字型のドキュメントはうまく印刷されない傾向がある。
  </div>

  <h3 id=logical-direction-layout><span class=secno>7.4. </span>
   送り相対のマッピング</h3>

  <p>送り相対方向は要素の<em>包含ブロック</em>のwriting modeを考慮して算出され、ボックスプロパティ(margins, borders, padding)に関する相対レイアウトルール、包含ブロック無いのボックス配置に関連する各種プロパティ(&lsquo;<code class=property>float</code>&rsquo;, &lsquo;<code
   class=property>clear</code>&rsquo;, &lsquo;<a href="#top"><code
   class=property>top</code></a>&rsquo;, &lsquo;<a href="#bottom"><code
   class=property>bottom</code></a>&rsquo;, &lsquo;<a href="#left"><code
   class=property>left</code></a>&rsquo;, &lsquo;<a href="#right"><code
   class=property>right</code></a>&rsquo;)で使われる。 インライン要素では、<em>親要素</em>のwriting modeが代わりに使われる。

  <p>例えば、ボックスのインライン次元が <a href="http://www.w3.org/TR/CSS21/visudet.html#blockwidth">over-constrained</a>の時にドロップされるマージンは、包含ブロックのwriting modeによって決定されるend marginである。

  <p><a href="http://www.w3.org/TR/CSS21/box.html#collapsing-margins">margin
   collapsing rules</a> は top margin の代わりに<em>before margin</em> へ、bottom margin の代わりに <em>after margin</em> へ、厳密に適用される。同様に before padding と before border は top padding と top border の代わりに、after padding と after border は bottom padding と bottom borderの代わりとなる。これは毎回のbefore marginとafter marginの折りたたみのみを意味することに注意すること。

  <p> 送り相対方向は要素のwriting modeを考慮して算出され、要素のコンテンツに関する相対レイアウトに用いられる:

  <ul>
   <li>&lsquo;<code class=property>text-align</code>&rsquo; プロパティの初期値はラインボックスのstart edgeを配置する。

   <li>&lsquo;<code class=property>text-indent</code>&rsquo; プロパティはラインボックスのstart edgeからのインデントを行う。

   <li>表では、列の順序づけを表のstart sideで開始し、行の順序づけを表のbefore sideで開始する。
  </ul>

  <h3 id=line-mappings><span class=secno>7.5. </span> 行相対マッピング</h3>

  <p><dfn id=line-relative-directions0>line-relative direction(行相対方向)</dfn>には <a href="#over">over</a>, <a href="#under">under</a>, <a href="#line-left">line-left</a>, <a href="#line-right">line-right</a> がある。<abbr title=left-to-right>LTR</abbr> &lsquo;<a href="#horizontal-tb"><code class=css>horizontal-tb</code></a>&rsquo; のwriting modeでは、それぞれtop, bottom, left, right 方向に対応している。

  <p>line-right direction と line-left direction は要素のwriting modeを考慮して算出され、以下のプロパティの値である &lsquo;<a href="#left"><code class=css>left</code></a>&rsquo; と &lsquo;<a href="#right"><code class=css>right</code></a>&rsquo; の解釈に使用される:

  <ul>
   <li>&lsquo;<code class=property>text-align</code>&rsquo; プロパティ <a
    href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>
  </ul>

  <p>line-right direcrion と line-left direction は要素の<em>包含ブロック</em>のwriting modeを考慮して算出され、以下のプロパティの値である &lsquo;<a href="#left"><code class=css>left</code></a>&rsquo; と &lsquo;<a href="#right"><code class=css>right</code></a>&rsquo; の解釈に使用される:

  <ul>
   <li>&lsquo;<code class=property>float</code>&rsquo; プロパティ <a
    href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

   <li>&lsquo;<code class=property>clear</code>&rsquo; プロパティ <a
    href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>
  </ul>

  <p>over direction と under direction は要素のwriting modeから算出され、以下のように、ラインボックスの "top" (over edge) と "bottom" (under edge) の解釈を定義するために使用される:

  <ul>
   <li>&lsquo;<code class=property>vertical-align</code>&rsquo; プロパティでは、ラインボックスの "top" は over edgeであり、 "bottom" は under edge である。正の長さとパーセンテージの値は、ベースラインを over edge 方向へシフトする。<a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

   <li>&lsquo;<code class=property>text-decoration</code>&rsquo; プロパティでは、underlineがテキストの下側に、overlineがテキストの上側に描かれる。<a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a><span class=note>CSS Text Moduleはこの点を詳しく定義し、underline と overline の配置を制御する機能を提供している。<a href="#CSS3TEXT" rel=biblioentry>[CSS3TEXT]<!--{{CSS3TEXT}}--></a></span>
  </ul>

  <h3 id=physical-only><span class=secno>7.6. </span> 純粋に物理的なマッピング</h3>

  <p>以下の値はその定義において純粋に物理的であり、writing modeの変化に対応しない:

  <ul>
   <li>&lsquo;<code class=property>clip</code>&rsquo; プロパティの &lsquo;<code class=css>rect()</code>&rsquo; <a href="#CSS21"
    rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

   <li>background プロパティ <a href="#CSS21"
    rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a> <a href="#CSS3BG"
    rel=biblioentry>[CSS3BG]<!--{{!CSS3BG}}--></a>

   <li>border-image プロパティ <a href="#CSS3BG"
    rel=biblioentry>[CSS3BG]<!--{{!CSS3BG}}--></a>

   <li>&lsquo;<code class=property>box-shadow</code>&rsquo; プロパティと &lsquo;<code class=property>text-shadow</code>&rsquo; プロパティのオフセット
  </ul>

  <h3 id=caption-side><span class=secno>7.7. </span> 表題のマッピング: &lsquo;<code class=property>caption-side</code>&rsquo; keywords</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Property:

     <td>&lsquo;<code class=property>caption-side</code>&rsquo;

    <tr>
     <th>新しい値:

     <td>&lsquo;<a href="#before"><code class=css>before</code></a>&rsquo; |
      &lsquo;<a href="#after"><code class=css>after</code></a>&rsquo;

    <tr>
     <th>初期値:

     <td>before

    <tr>
     <th>適用範囲:

     <td>CSS2.1と同じ

    <tr>
     <th>継承:

     <td>CSS2.1と同じ

    <tr>
     <th>パーセンテージ:

     <td>CSS2.1と同じ

    <tr>
     <th>メディア:

     <td>CSS2.1と同じ

    <tr>
     <th>算出値:

     <td>指定した値
  </table>

  <p>このモジュールは新しい2つの値を &lsquo;<code class=property>caption-side</code>&rsquo; プロパティに導入する: &lsquo;<a href="#before"><code class=css>before</code></a>&rsquo; と &lsquo;<a href="#after"><code class=css>after</code></a>&rsquo; である。これらはそれぞれテーブルボックスの前と後ろにキャプションを配置する。&lsquo;<a href="#horizontal-tb"><code class=css>horizontal-tb</code></a>&rsquo; writing modeの表では、これらはそれぞれ &lsquo;<a href="#top"><code class=css>top</code></a>&rsquo; と &lsquo;<a href="#bottom"><code class=css>bottom</code></a>&rsquo; が存在する場合と同じである。<a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

  <p class=note>&lsquo;<code class=property>top-outside</code>&rsquo; と &lsquo;<code class=property>bottom-outside</code>&rsquo; をサポートする実装のために、&lsquo;<code class=property>before-outside</code>&rsquo; と &lsquo;<code class=property>after-outside</code>&rsquo; への対応も同様に導入されるだろう。

  <p>&lsquo;<code class=property>caption-side</code>&rsquo; プロパティの値 &lsquo;<a href="#top"><code class=css>top</code></a>&rsquo; と &lsquo;<a href="#bottom"><code class=css>bottom</code></a>&rsquo; をサポートするが、side caption(例えば、横組における &lsquo;<a href="#left"><code class=css>left</code></a>&rsquo; と &lsquo;<a href="#right"><code class=css>right</code></a>&rsquo; のキャプション)をサポートしない実装は、縦組において &lsquo;<a href="#top"><code class=css>top</code></a>&rsquo; と &lsquo;<a href="#bottom"><code class=css>bottom</code></a>&rsquo; を &lsquo;<a href="#before"><code class=css>before</code></a>&rsquo; として扱わなければならない。

  <p>side caption(例えば、古い CSS&nbsp;2.0 仕様 <a href="#CSS2"
   rel=biblioentry>[CSS2]<!--{{CSS2}}--></a>の &lsquo;<a href="#left"><code class=css>left</code></a>&rsquo; と &lsquo;<a href="#right"><code class=css>right</code></a>&rsquo; の値)をサポートする実装では、このモジュールはこれと同様に動作し、table要素のwriting modeを考慮して算出したテーブルボックスのキャプションを、stat sideかend sideに配置するよう、&lsquo;<a href="#start"><code class=css>start</code></a>&rsquo; と &lsquo;<a href="#end"><code class=css>end</code></a>&rsquo; の値を導入する。このような実装のために、&lsquo;<a href="#top"><code class=css>top</code></a>&rsquo; と &lsquo;<a href="#bottom"><code class=css>bottom</code></a>&rsquo; の値はキャプションを表のtop sideとbottom sideにそれぞれ配置すべきである。

  <p class=note>CSS2.0のside caption model にはいくつかの<a href="http://lists.w3.org/Archives/Public/www-style/2002Dec/0142.html">問題</a>があり、CSS3では異なる定義がされることになるだろう。


  <!--
<h3 id="html-attributes">HTML Attributes</h3>

  <p>This section defines the mapping of HTML presentational attributes
    in CSS. This section is normative for user agents supporting HTML
    in addition to the 'writing-mode' property. [[!HTML40]] [[!HTML5]]

  <h4 id="width-height-attributes">The <code>width</code> and <code>height</code> attributes</h4>

  <p>The HTML <code>width</code> and <code>height</code> attributes refer
    to the physical width and height for elements that that are replaced,
    i.e.
    <code>&lt;applet&gt;</code>,
    <code>&lt;embed&gt;</code>,
    <code>&lt;iframe&gt;</code>,
    <code>&lt;img&gt;</code>,
    <code>&lt;object&gt;</code>,
    <code>&lt;canvas&gt;</code>,
    and
    <code>&lt;video&gt;</code>

  <p>Form elements elements contain text, therefore their contents should be
    affected by writing mode, in which case these attributes refer to the
    <em>logical</em> width and height. The UA may, however, choose not
    to rotate nor flip these elements in vertical writing modes if it is not
    capable, and in that case, these attributes remain physical.</p>
    <p class="issue">when not to rotate form elements/MathML,
      should treat them as images (always upright)
      or to force writing-mode to always calculate to horizontal-tb?</p>

  <p>On table-related elements (<code>&lt;table&gt;</code>, <code>&lt;colgroup&gt;</code>,
    <code>&lt;col&gt;</code>, <code>&lt;tr&gt;</code>, <code>&lt;th&gt;</code>,
    <code>&lt;td&gt;</code>) the <code>width</code> and <code>height</code>
    attributes are always logical.

  <p>The <code>size</code> attribute of the <code>&lt;hr&gt;</code> element
    is also logical (refers to the logical height).

  <h4 id="alignment-attributes">Alignment, Float and Clear Attributes</h4>

  <p>The following attributes behave the same way as their corresponding
    CSS properties:</p>

  <ul>
    <li><code>align</code> as 'float' or 'text-align'</li>
    <li><code>clear</code> as 'clear'</li>
    <li><code>valign</code> as 'vertical-align'</li>
  </ul>

  <h4 id="spacing-attributes">Spacing Attributes</h4>

  <p>The following attributes are logical and, as margins, are logical
    with respect to the writing mode of the <em>parent</em> element.</p>

  <ul>
    <li><code>hspace</code> as start and end margins</li>
    <li><code>vspace</code> as before and after margins</li>
    <li>marginwidth</li>
    <li>marginheight</li>
  </ul>
-->

  <h2 id=page-direction><span class=secno>8. </span> Page Flow: ページの進行方向</h2>

  <p>CSS2.1のpaged mediaは全てのページを右ページか左ページに分類している。ページの進行方向は、見開きで最初にめくるページか左か右かを決定し、また最初のページがデフォルトで左か右かを決定している。これらは以下に示すwriting directionに依存する。

  <ul>
   <li>ルート要素の &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; が &lsquo;<a href="#vertical-rl"><code class=css>vertical-rl</code></a>&rsquo; か、同じくルート要素の &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; が &lsquo;<a href="#horizontal-tb"><code class=css>horizontal-tb</code></a>&rsquo; で &lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo; が &lsquo;<a href="#rtl"><code class=css>rtl</code></a>&rsquo; の場合、ページ進行方向は右から左になる。

   <li>ルート要素の &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; が &lsquo;<a href="#vertical-lr"><code class=css>vertical-lr</code></a>&rsquo; か、同じくルート要素の &lsquo;<a href="#writing-mode1"><code class=property>writing-mode</code></a>&rsquo; が &lsquo;<a href="#horizontal-tb"><code class=css>horizontal-tb</code></a>&rsquo; で &lsquo;<a href="#direction0"><code class=property>direction</code></a>&rsquo; が &lsquo;<a href="#ltr"><code class=css>ltr</code></a>&rsquo; の場合、ページ進行方向は左から右になる。

  </ul>

  <p>(無効化されない限り、文書の最初のページは見開きの後半から始まっている。例えば、ページ進行方向が左から右だと、右から始まる。)

  <h2 id=text-combine><span class=secno>9. </span> グリフの合成</h2>

  <h3 id=text-combine-horizontal><span class=secno>9.1. </span>
   縦組みでの水平合成: &lsquo;<a href="#text-combine-horizontal0"><code class=property>text-combine-horizontal</code></a>&rsquo; プロパティ</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=text-combine-horizontal0>text-combine-horizontal</dfn>

    <tr>
     <th>値:

     <td>none | all | [ [digits &lt;integer> | ascii-digits &lt;integer> ] ||
      [ alpha &lt;integer> | latin &lt;integer> ] || alphanumeric
      &lt;integer> ]

    <tr>
     <th>初期値:

     <td>none

    <tr>
     <th>適用範囲:

     <td>置換不能なインライン要素

    <tr>
     <th>継承:

     <td>される

    <tr>
     <th>パーセンテージ:

     <td>N/A

    <tr>
     <th>メディア:

     <td>visual

    <tr>
     <th>算出値:

     <td>指定した値
  </table>

  <p>このプロパティは1文字分のスペースに複数文字を合成可能にするものである。このプロパティは縦組でのみ効果がある。値の意味を以下に示す:

  <dl>
   <dt><dfn id=none title="text-combine-horizontal:none">none</dfn>

   <dd>特別な処理を行わない。

   <dt><dfn id=all title="text-combine-horizontal:all">all</dfn>

   <dd>縦組においては、縦書きのラインボックス内で、水平方向に要素のテキストコンテンツを、理想的には1表意文字のスペースに納めて表示しようとする(下記参照)。レイアウトと装飾において、合成結果は1つのグリフとして扱われる。コンテンツが任意の要素の境界を含んでいる場合、これは要素とその子孫において &lsquo;<code class=css>text-combine-horizontal: none</code>&rsquo; として扱われる。

   <dt><dfn id=digits title="text-combine-horizontal:digits">digits</dfn>

   <dd>要素内において、与えられた整数と同じかまたは少ない文字数の、水平方向に連続した数字列は、 &lsquo;<code class=css>text-combine-horizontal: all</code>&rsquo; のインラインボックスであるかのように扱われる。このプロパティでは、<dfn id=horizontal-digit>horizontal digit</dfn> は <a href="#script-orientations">vertical script</a> に属していない、Number category (N*)に属する任意の文字である。

   <dt><dfn id=ascii-digits
    title="text-combine-horizontal:ascii-digits">ascii-digits</dfn>

   <dd>要素内において、与えられた整数と同じかまたは少ない文字数の、連続するASCII数字(U+0030&ndash;U+0039)は、&lsquo;<code class=css>text-combine-horizontal: all</code>&rsquo; のインラインボックスであるかのように扱われる。<p class=issue>この定義は単純化のために &lsquo;<code class=css>digits</code>&rsquo; へ置き換えられる予定である。

   <dt><dfn id=alpha title="text-combine-horizontal:alpha">alpha</dfn>

   <dd>要素内において、与えられた整数と同じかまたは少ない文字数の、水平方向に連続した文字列は、&lsquo;<code class=css>text-combine-horizontal: all</code>&rsquo; のインラインボックスであるかのように扱われる。このプロパティでは、<dfn id=horizonal-letter>horizonal letter</dfn> は <a href="#script-orientations">vertical script</a> に属していない、Letter category (L*)に属する任意の文字である。

   <dt><dfn id=latin title="text-combine-horizontal:latin">latin</dfn>

   <dd>要素内において、与えられた整数と同じかまたは少ない文字数の、連続するラテン文字列は、 &lsquo;<code class=css>text-combine-horizontal: all</code>&rsquo; のインラインボックスであるかのように扱われる。このプロパティでは、<dfn id=latin-letter>Latin letter</dfn> はラテン文字に属しており、 Letter category (L*)に属する任意の文字である。
    <p class=issue>この定義は単純化のため &lsquo;<code
     class=css>alpha</code>&rsquo; へ置き換えられる予定である。

   <dt><dfn id=alphanumeric
    title="text-combine-horizontal:alphanumeric">alphanumeric</dfn>

   <dd>要素内において、与えられた整数と同じかまたは少ない文字数の、水平方向に連続する数字と文字の列は、&lsquo;<code class=css>text-combine-horizontal: all</code>&rsquo; のインラインボックスであるかのように扱われる。

  </dl>

  <p class=issue>&lsquo;<code class=css>all</code>&rsquo; と &lsquo;<code class=css>none</code>&rsquo; を除く全ての値は仕様から落ちる可能性がある。我々は、CRにどれを採用すべきなのか?

  <p>&lsquo;<code class=css>text-combine-horizontal: all</code>&rsquo; によってテキストが合成されると、テキストが合成されたグリフは、横組でline-heightが1emのインラインボックスのコンテンツのように水平方向にスタックされる(改行やletter-spacing(文字間隔)などを除くが、指定されたフォントの設定を使用する)。合成物の実サイズは1em四方であると仮定され、四角からはみ出たものはレイアウト時に測定されない。ユーザーエージェントはグリフを1emの四角の中で水平および垂直方向にセンタリングすべきである。このような四角で選択される合成物のベースラインは、baseline alignment shiftより先に、親インラインボックスのtext-over baselineとtext-under baselineとの間でセンタリングされる。バイダイ配置、改行、圏点、テキスト装飾などのテキストレイアウト目的で、合成物はObject Replacement CharacterのU+FFFCを表す1つのグリフとして扱われる。

  <p>いくつかのフォントにおいては、表意グリフが、幅1emだが高さ1em未満のような圧縮されたデザインとなっている。そのようなフォントに対応するため、ユーザエージェントは水 U+6C34のadvance heightに合わせて合成物のコンテンツを垂直方向へスケーリングする。
   <!-- 水 U+6C34 was chosen because it is a very basic character common to
    all Han-based scripts, so would have to appear in any usable ideographic
    font; and its shape is very full in both dimensions, so it would be
    unlikely to be shortened in a proportional font -->
   

  <p>CSSのfullwidth transformation(&lsquo;<code class=css>text-transform: full-width</code>&rsquo; <a href="#CSS3TEXT"
   rel=biblioentry>[CSS3TEXT]<!--{{CSS3TEXT}}--></a> か &lsquo;<code class=css>font-variant-east-asian-width: full-width</code>&rsquo; <a href="#CSS3FONT" rel=biblioentry>[CSS3FONT]<!--{{CSS3FONT}}--></a>)は、1文字以上の合成テキストのためにオフになる。

  <div class=example>
   <p>東アジアのドキュメントでは、&lsquo;<a href="#text-combine-horizontal0"><code class=css>text-combine-horizontal</code></a>&rsquo; の効果が日付の構成文字や頭文字語のようなLatin-baseの文字列表示によく使われており、行の組方向に関係なく横組となる:

   <div class=figure>
    <p><img alt="Diagram of tate-chu-yoko, showing the two digits of a date
     set halfwidth side-by-side in a vertical column of text" class=example
     src=tate-chu-yoko.png>

    <p class=caption>horizontal-in-vertical が使われる<i
     lang=ja>縦中横</i>の例</p>
   </div>

   <p>この図は以下のCSSの結果である。</p>

   <pre>
<!-- -->date { text-combine-horizontal: digits 2; }
    </pre>

   <p>マークアップは次のようになる:</p>

   <pre>
<!-- -->&lt;date&gt;&#x5E73;&#x6210;20&#x5E74;4&#x6708;16&#x65E5;&#x306B;&lt;/date&gt;
    </pre>

   <p>日本では、この効果は <i lang=ja>縦中横</i>として知られる。
  </div>

  <div class=example>
   <p>以下の例は &lsquo;<code class=css>text-combine-horizontal: digits 2</code>&rsquo; を、数字だと判明しているコンテンツの一部ではなく、ドキュメント全体に適用したもので、意図しない結果を招く可能性がある。

   <pre>&lt;p>あれは10,000円ですよ！&lt;/p></pre>

   <div class=figure>
    <p><img alt="Rendering of the above markup with 'text-combine-horizontal:
     digits': the first two digits of the number are rendered as
     tate-chu-yoko while the rest of the number is rendered sideways."
     class=example src=bad-tate-chu-yoko.png>

    <p class=caption><i lang=ja>縦中横</i>の適用失敗例</p>
   </div>
  </div>

  <h3 id=text-combine-mode><span class=secno>9.2. </span>
   縦組における水平方向グリフのスケーリング: &lsquo;<a
   href="#text-combine-mode0"><code
   class=property>text-combine-mode</code></a>&rsquo; プロパティ</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>名称:

     <td><dfn id=text-combine-mode0>text-combine-mode</dfn>

    <tr>
     <th>値:

     <td>auto | compress | [ no-compress || use-glyphs ]

    <tr>
     <th>初期値:

     <td>auto

    <tr>
     <th>適用範囲:

     <td>置換不能なインライン要素

    <tr>
     <th>継承:

     <td>される

    <tr>
     <th>パーセンテージ:

     <td>N/A

    <tr>
     <th>メディア:

     <td>visual

    <tr>
     <th>算出値

     <td>指定した値
  </table>

  <p>このプロパティは、&lsquo;<a href="#text-combine-horizontal0"><code class=property>text-combine-horizontal</code></a>&rsquo; を用いて1文字分のスペースへの文字合成が指定されたときに、複数文字がどのように合成されるのかをコントロールする。値の意味を以下に示す:

  <dl>
   <dt><dfn id=auto title="text-combine-mode:auto">auto</dfn>

   <dd>コンテンツが1emより拾い場合、ユーザエージェントはコンテンツを1emにフィットさせようとしなければならないが、そうする際に任意の方法を使用することができる。

   <dt><dfn id=compress title="text-combine-mode:compress">compress</dfn>

   <dd>1emに収まるまで水平に圧縮する。代わりの幅のグリフで代替しない。

   <dt><dfn id=use-glyphs
    title="text-combine-mode:use-glyphs">use-glyphs</dfn>

   <dd>1em内に合成文字を収めるために、必要に応じて狭いグリフで置換しようとする:
    <ul>
     <li>2文字の合成文字では1/2emのグリフかプロポーショナルなグリフを使用する

     <li>3文字の合成文字は1/3emのグリフを使用する(もしフォントがこの機能をサポートしていればの場合。そうでなければ1/2emのグリフかプロポーショナルなグリフへフォールバックする)

     <li>など
    </ul>

    <p>利用可能な分数幅のグリフを持つフォントでも、全ての文字に対して分数幅グリフを持っているわけではないので、必要とされる送り幅と一致しない場合、ユーザエージェントは個別に各グリフを圧縮するかパディング(両側均等に)して、&lsquo;<code class=css>use-glyphs</code>&rsquo; で想定される送り幅を確保しなければならない。(このステップは &lsquo;<code class=css>no-compress</code>&rsquo; が指定されている場合には適用されない)

   <dt><dfn id=no-compress
    title="text-combine-mode:no-compress">no-compress</dfn>

   <dd>合成文字を1emに収めるために、合成文字の圧縮やグリフの置換を実施しない。しかし、&lsquo;<code class=css>use-glyphs</code>&rsquo; で合成するときは、サイズ要求に合わないと &lsquo;<code class=css>use-glyphs</code>&rsquo; ごとにグリフを置換するが、グリフの圧縮は行わない。この値では、グリフが大幅に行をオーバーフローする可能性がある。
  </dl>

  <h2 class=no-num id=changes>変更点</h2>

  <h3 class=no-num id=recent-changes> <a
   href="http://www.w3.org/TR/2011/WD-css3-writing-modes-20110531/">May 2011
   CSS Writing Modes Module Level 3 <abbr title="Working Draft">WD</abbr></a> からの変更点</h3>

  <p>主な変更点は次のとおり:

  <ul>
   <li>壊れたバイダイボックスのボーダーがどちら側に描画されるか再定義

   <li> &lsquo;<a href="#unicode-bidi0"><code class=property>unicode-bidi</code></a>&rsquo; で許容される値の組み合わせを変更し、同様にインライン要素で発見的手法を使えるように &lsquo;<a href="#plaintext"><code class=css>plaintext</code></a>&rsquo; を定義

   <li>&lsquo;<a href="#text-orientation0"><code class=property>text-orientation</code></a>&rsquo; の値であった &lsquo;<code class=css>vertical-right</code>&rsquo; の名称を &lsquo;<a href="#upright-right"><code class=css>upright-right</code></a>&rsquo; へ変更

   <li>&lsquo;<a href="#text-orientation0"><code class=property>text-orientation</code></a>&rsquo; の値であった &lsquo;<code class=css>rotate</code>&rsquo; の名称を &lsquo;<a href="#sideways"><code class=property>sideways</code></a>&rsquo; へ変更

   <li>&lsquo;<a href="#text-orientation0"><code class=property>text-orientation</code></a>&rsquo; の値であった &lsquo;<code class=css>auto</code>&rsquo; の名称を &lsquo;<a href="#use-glyph-orientation"><code class=css>use-glyph-orientation</code></a>&rsquo; へ変更し、at-risk(仕様から落ちる可能性がある)とした

   <li><code>vrt2</code> 機能への参照を削除するために縦組のためのルールを微調整し、<a href="#vertical-typesetting-details">synthesis rules</a> 等の様々な記述の誤りと記載漏れを修正

   <li>&lsquo;<code class=property>text-combine</code>&rsquo; プロパティの名称を &lsquo;<a href="#text-combine-horizontal0"><code class=property>text-combine-horizontal</code></a>&rsquo; へ変更し、character class にて auto-combine 機能を追加

   <li>縦組での横方向テキスト合成にて使用する、スケーリング手段をコントロールする &lsquo;<a href="#text-combine-mode0"><code class=property>text-combine-mode</code></a>&rsquo; プロパティを追加

   <li>付録に <a href="#character-properties">文字とプロパティ</a>を追加
  </ul>

  <h2 id=conformance><span class=secno>10. </span> 適合性</h2>

  <h3 id=conventions><span class=secno>10.1. </span> 文書規約</h3>

  <p>適合性要件は、記述的な断定とRFC 2119の用語とを組み合わせて表現される。この文書の標準的パーツにある “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” のキーワードは、RFC 2119表記のように解釈される。だが、読みやすさを考え、本しようにおいてこれらのキーワードは全てを大文字にしない。
  
  <p>本文用の全てのテキストは、明示的な非標準、例、注のマークがある箇所を覗いて標準に即している。<a href="#RFC2119" rel=biblioentry>[RFC2119]<!--{{!RFC2119}}--></a>

  <p>本文用の例は “for example” という言葉を使うか、<code>class="example"</code> を使って標準的文書と分けて紹介される。例えば次のようになる:

  <div class=example>
   <p>This is an example of an informative example.</p>
  </div>

  <p>参考情報となる注は “Note” で始まるか、<code>class="note"</code> を使って標準的文書と分離される。例えば次のようになる:

  <p class=note>Note, this is an informative note.

  <h3 id=conformance-classes><span class=secno>10.2. </span> 適合クラス</h3>

  <p>CSS Writing Modes Level 3 の適合クラスには次の3つが定義されている:

  <dl>
   <dt><dfn id=style-sheet title="style sheet!!as conformance class">スタイルシート</dfn>

   <dd><a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSSのスタイルシート</a>。

   <dt><dfn id=renderer>レンダラ</dfn>

   <dd>スタイルシートの意味を解釈し、それを使ってドキュメントを表示する<a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">ユーザーエージェント</a>。

   <dt><dfn id=authoring-tool>オーサリングツール</dfn>

   <dd>スタイルシートを記述する<a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">ユーザーエージェント</a>
  </dl>

  <p>スタイルシートは、このモジュールに定義されたプロパティを使用する宣言が、全て包括的なCSS文法およびこのモジュールの中で与えられるプロパティ個々の文法に対してvalidな値を持っている場合、CSS Writing Modes Level 3に準拠している。

  <p>レンダラは、適切な仕様によって定義されるスタイルシートの解釈に加え、CSS Writing Mides Level 3 で定義される全ての機能を正しくパースし、それに応じてドキュメントをレンダリングすることでサポートした場合、CSS Writing Modes Level 3に準拠している。しかし、デバイスの制限によってがユーザーエージェントが正確にレンダリングできない場合、ユーザーエージェントが非準拠となる。(例えば、ユーザーエージェントがモノクロのモニタでカラーをレンダリングする必要の無い場合)

  <p>オーサリングツールは、一般的なCSS文法および本モジュールにおける機能の個々の文法に従って構文的に正しくスタイルシートを書き、本モジュールで説明されているスタイルシートの他全ての適合性要件を満たしている場合、CSS Writing Modes Level 3に準拠している。


  <h3 id=partial><span class=secno>10.3. </span> 部分的な実装</h3>

  <p>ドキュメント制作者がフォールバックの値としてforward-compatible parsing rules(上位互換の解析規則)を活用出来るように、CSSレンダラは規則、プロパティ、プロパティの値、キーワード、その他使用可能なサポートのレベルがない構文要素を、invalid(そして<a href="http://www.w3.org/TR/CSS21/conform.html#ignore">必要に応じて無視</a>)として扱う<strong>必要がある</strong>。特に、ユーザーエージェントは1つの複数値プロパティ宣言において、サポートされていないコンポーネントの値と、尊重されサポートされている値を選択的に無視しては<strong>ならない</strong>。もし任意の値がinvalidと見なされている(サポートされていない値はそうでなければならない)場合、CSSは宣言全体が無視されている必要がある。


  <h3 id=experimental><span class=secno>10.4. </span> Experimental
   Implementations</h3>

  <p>To avoid clashes with future CSS features, the CSS2.1 specification
   reserves a <a
   href="http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords">prefixed
   syntax</a> for proprietary and experimental extensions to CSS.

  <p>Prior to a specification reaching the Candidate Recommendation stage in
   the W3C process, all implementations of a CSS feature are considered
   experimental. The CSS Working Group recommends that implementations use a
   vendor-prefixed syntax for such features, including those in W3C Working
   Drafts. This avoids incompatibilities with future changes in the draft.

  <h3 id=testing><span class=secno>10.5. </span>Non-Experimental
   Implementations</h3>

  <p>Once a specification reaches the Candidate Recommendation stage,
   non-experimental implementations are possible, and implementors should
   release an unprefixed implementation of any CR-level feature they can
   demonstrate to be correctly implemented according to spec.

  <p>To establish and maintain the interoperability of CSS across
   implementations, the CSS Working Group requests that non-experimental CSS
   renderers submit an implementation report (and, if necessary, the
   testcases used for that implementation report) to the W3C before releasing
   an unprefixed implementation of any CSS features. Testcases submitted to
   W3C are subject to review and correction by the CSS Working Group.

  <p>Further information on submitting testcases and implementation reports
   can be found from on the CSS Working Group's website at <a
   href="http://www.w3.org/Style/CSS/Test/">http://www.w3.org/Style/CSS/Test/</a>.
   Questions should be directed to the <a
   href="http://lists.w3.org/Archives/Public/public-css-testsuite">public-css-testsuite@w3.org</a>
   mailing list.

  <h3 id=cr-exit-criteria><span class=secno>10.6. </span> CR Exit Criteria</h3>

  <p> For this specification to be advanced to Proposed Recommendation, there
   must be at least two independent, interoperable implementations of each
   feature. Each feature may be implemented by a different set of products,
   there is no requirement that all features be implemented by a single
   product. For the purposes of this criterion, we define the following
   terms:

  <dl>
   <dt>independent

   <dd>each implementation must be developed by a different party and cannot
    share, reuse, or derive from code used by another qualifying
    implementation. Sections of code that have no bearing on the
    implementation of this specification are exempt from this requirement.

   <dt>interoperable

   <dd>passing the respective test case(s) in the official CSS test suite,
    or, if the implementation is not a Web browser, an equivalent test. Every
    relevant test in the test suite should have an equivalent test created if
    such a user agent (UA) is to be used to claim interoperability. In
    addition if such a UA is to be used to claim interoperability, then there
    must one or more additional UAs which can also pass those equivalent
    tests in the same way for the purpose of interoperability. The equivalent
    tests must be made publicly available for the purposes of peer review.

   <dt>implementation

   <dd>a user agent which:
    <ol class=inline>
     <li>implements the specification.

     <li>is available to the general public. The implementation may be a
      shipping product or other publicly available version (i.e., beta
      version, preview release, or “nightly build”). Non-shipping product
      releases must have implemented the feature(s) for a period of at least
      one month in order to demonstrate stability.

     <li>is not experimental (i.e., a version specifically designed to pass
      the test suite and is not intended for normal usage going forward).
    </ol>
  </dl>

  <p>The specification will remain Candidate Recommendation for at least six
   months.

  <h2 class=no-num id=acknowledgements> Acknowledgements</h2>

  <p>John Daggett, Martin Heijdra, Yasuo Kida, Tatsuo Kobayashi, Toshi
   Kobayashi, Ken Lunde, Nat McCully, Paul Nelson, Kenzou Onozawa, Michel
   Suignard, Taro Yamamoto, Steve Zilles

  <h2 class=no-num id=character-properties>Appendix A. Characters and
   Properties</h2>

  <p>Unicode defines three codepoint-level properties that are referenced in
   CSS Writing Modes:

  <dl>
   <dt><a href="http://www.unicode.org/reports/tr11/#Definitions">East Asian
    width</a>

   <dd>Defined in <a href="#UAX11"
    rel=biblioentry>[UAX11]<!--{{!UAX11}}--></a> and given as the
    East_Asian_Width property in the Unicode Character Database <a
    href="#UAX44" rel=biblioentry>[UAX44]<!--{{!UAX44}}--></a>.

   <dt><a
    href="http://www.unicode.org/reports/tr44/#General_Category_Values">General
    Category</a>

   <dd>Defined in <a href="#UAX44"
    rel=biblioentry>[UAX44]<!--{{!UAX44}}--></a> and given as the
    General_Category property in the Unicode Character Database <a
    href="#UAX44" rel=biblioentry>[UAX44]<!--{{!UAX44}}--></a>.

   <dt><a href="http://www.unicode.org/reports/tr24/#Values">Script
    property</a>

   <dd>Defined in <a href="#UAX24"
    rel=biblioentry>[UAX24]<!--{{!UAX24}}--></a> and given as the Script
    property in the Unicode Character Database <a href="#UAX44"
    rel=biblioentry>[UAX44]<!--{{!UAX44}}--></a>. (UAs should include any
    ScriptExtensions.txt assignments in this mapping.)
  </dl>

  <p id=grapheme-cluster>In several sections (as noted), the term <dfn
   id=character>character</dfn> is defined as <em>extended grapheme
   cluster</em> per <a href="#UAX29"
   rel=biblioentry>[UAX29]<!--{{!UAX29}}--></a>. It is roughly equivalent to
   what a language user considers to be a character or a basic unit of the
   script (which might not be a single Unicode codepoint). The UA may further
   tailor this definition as allowed by Unicode.

  <p>Unicode defines properties for characters, but for &lsquo;<a
   href="#text-orientation0"><code
   class=property>text-orientation</code></a>&rsquo; and <a
   href="#vertical-typesetting-details">Vertical Typesetting Synthesis</a>,
   it is necessary to determine the properties of a grapheme cluster. For the
   purposes of CSS Writing Modes, the properties of a grapheme cluster are
   given by its base character&#8212;except in two cases:

  <ul>
   <li>Grapheme clusters formed with an Enclosing Mark (Me) of the Common
    script are considered to be Other Symbols (So) in the Common script. They
    are assumed to have the same Unicode properties as the Replacement
    Character U+FFFD.

   <li>Grapheme clusters formed with a Space Separator (Zs) as the base are
    considered to be Modifier Symbols (Sk). They are assumed to have the same
    East Asian Width property as the base, but take their other properties
    from the first combining character in the sequence.
  </ul>

  <h2 class=no-num id=script-orientations>Appendix B: Bi-orientational
   Transformations</h2>

  <p><em>This section is normative.</em>

  <p>This appendix gives the orientational properties of scripts in Unicode
   6.0 <a href="#UNICODE" rel=biblioentry>[UNICODE]<!--{{!UNICODE}}--></a>.
   Any script not listed explicitly is assumed to be <i>horizontal-only</i>.
   The script classification of Unicode characters is given by <a
   href="#UAX24" rel=biblioentry>[UAX24]<!--{{!UAX24}}--></a>.

  <table class=data>
   <caption>Vertical Scripts and their Bi-orientational Transform</caption>

   <thead>
    <tr>
     <th>Code

     <th>Name

     <th>Transform

   <tbody>
    <tr>
     <td>Bopo

     <td>Bopomofo

     <td>translate

    <tr>
     <td>Egyp

     <td>Egyptian Hieroglyphs

     <td>translate

    <tr>
     <td>Hira

     <td>Hiragana

     <td>translate

    <tr>
     <td>Kana

     <td>Katakana

     <td>translate

    <tr>
     <td>Hani

     <td>Han

     <td>translate

    <tr>
     <td>Hang

     <td>Hangul

     <td>translate

    <tr>
     <td>Mong

     <td>Mongolian

     <td>rotate

    <tr>
     <td>Phag

     <td>Phags Pa

     <td>rotate

    <tr>
     <td>Yiii

     <td>Yi

     <td>translate
  </table>

  <p><strong>Exceptions:</strong> For the purposes of this specification, all
   fullwidth (F) and wide (W) characters are treated as belonging to a
   vertical script with a translate bi-orientational transform. All halfwidth
   (H) characters are treated as belonging to a vertical script with a rotate
   bi-orientational transform. <a href="#UAX11"
   rel=biblioentry>[UAX11]<!--{{!UAX11}}--></a> Neutral (N), narrow (Na) and
   ambiguous (A) Letters (L*) belonging to the Common script are treated as
   belonging to a horizontal-only script.

  <p class=note>Ogham is also a rotating bi-orientational script, but because
   it is a bottom-to-top script, for the purposes of this specification it is
   treated as left-to-right horizontal. A future version of CSS may define
   proper handling of bottom-to-top scripts. Authors can work around this
   lack of support with the &lsquo;<a href="#sideways-left"><code
   class=css>sideways-left</code></a>&rsquo; value of &lsquo;<a
   href="#text-orientation0"><code
   class=property>text-orientation</code></a>&rsquo;.

  <h2 class=no-num id=vertical-typesetting-details>Appendix C: Vertical
   Typesetting Synthesis</h2>

  <p>This section defines an algorithm for automatic typesetting of vertical
   text. For readability, the term <a href="#character"><i>character</i></a>
   is used in place of <em>extended grapheme cluster</em> in this section.
   See <a href="#character-properties">Characters and Properties</a> for
   further details.

  <p class=issue>This section needs careful review. Please send feedback and
   suggestions for improvement, particularly for the <a
   href="http://unicode.org/cldr/utility/list-unicodeset.jsp?a=\p{Block%3DGeneral+Punctuation}%26[%3AGeneral_category%3DPo%3A]%0D%0A&amp;g=">U+2016&ndash;U+205F</a>
   range.

  <p>When &lsquo;<a href="#text-orientation0"><code
   class=property>text-orientation</code></a>&rsquo; is either &lsquo;<a
   href="#upright-right"><code class=css>upright-right</code></a>&rsquo; or
   &lsquo;<a href="#upright"><code class=css>upright</code></a>&rsquo;, the
   following settings are recommended:

  <ol>
   <li>Set any spaces (Zs), connectors (Pc), and bracketing punctuation (Ps,
    Pe, Pi, Pf) either upright using vertical font settings if available or
    sideways if they are not.
    <p class=note>Thus a THREE-PER-EM SPACE (U+2004) can be expected to
     provide a 1/3-em advance in the inline dimension, and brackets can be
     expected to encase their contents.</p>

   <li>Set East Asian fullwidth (F) and wide (W) characters upright (using
    vertical font settings if available).

   <li>Set any dashes (Pd) either upright using vertical font settings if
    available or sideways if they are not.
    <!-- fullwidth hyphen-minus need to be upright -->

   <li>Set East Asian halfwidth (H) characters sideways (or upright with
    vertical font settings if possible).

   <li>Set any other characters that are assigned to a script (i.e. do not
    belong to the Common, Inherited, or Unknown scripts) as required by
    &lsquo;<a href="#text-orientation0"><code
    class=property>text-orientation</code></a>&rsquo; and <a
    href="#script-orientations">Appendix B</a>.
  </ol>

  <p>When &lsquo;<a href="#text-orientation0"><code
   class=property>text-orientation</code></a>&rsquo; is &lsquo;<a
   href="#upright-right"><code class=css>upright-right</code></a>&rsquo;, the
   following settings are recommended for characters not otherwise-specified
   above:

  <ol>
   <li>Set the following characters using vertical font settings if
    available, otherwise set them sideways:
    <ul>
     <li>Other Punctuation (Po) with an East Asian Width width of ambiguous
      (A).

     <li><abbr title="U+00B2, U+00B3, U+00B9, U+20070,
      U+2074–U+2079">Superscripts</abbr>, <abbr
      title="U+2080–U+2089">subscripts</abbr>, and non-Indic <abbr
      title="U+00BC–U+00BE, U+2150–U+215F, U+2189">fractions</abbr> from
      the Other Number (No) category.

     <li>Private Use characters (Co).
    </ul>

   <li>Set the following characters sideways (i.e. rotated, using horizontal
    font settings).
    <ul>
     <li>Currency Symbols (Sc), Math Symbols (Sm), and Modifier Symbols (Sk)

     <li><abbr title="U+10107–U+10133">Aegean numbers</abbr> and <abbr
      title="U+A830–U+A835">North Indic fractions</abbr> from the Other
      Number (No) category.

     <li>All characters from the <abbr title="U+2500–U+257F">Box
      Drawing</abbr> and <abbr title="U+2580–U+259F">Block Elements</abbr>
      blocks

     <li>All directional arrows: the <abbr
      title="U+2190–U+21FF">Arrows</abbr> block, the <abbr
      title="U+261A–U+261F">Pointing hand symbols</abbr> from the
      Miscellaneous Symbols block, any <abbr title="U+2B00–U+2B11,
      U+2B45–U+2B46">arrow</abbr> from the Miscellaneous Symbols and Arrows
      block, any <abbr title="U+2794–U+27BE">Dingbat arrows</abbr> from the
      Dingbats block

     <li>Other Symbols (So) from the Latin-1 Supplement and Letterlike
      Symbols blocks.

     <li>Other Symbols (So) from the Aegean Numbers, Ancient Symbols, Common
      Indic Number Forms blocks
    </ul>

   <li>Set the following characters upright (i.e. translated, using vertical
    font settings if available):
    <ul>
     <li>All Other Symbols (So) characters not otherwise specified above.

     <li>All Other Numbers (No) characters not otherwise specified above.
    </ul>

   <li>Set all other characters sideways (i.e. rotated, using horizontal font
    settings).
  </ol>

  <p>When &lsquo;<a href="#text-orientation0"><code
   class=property>text-orientation</code></a>&rsquo; is &lsquo;<a
   href="#upright"><code class=css>upright</code></a>&rsquo;, set all
   characters upright (using vertical font settings if available) unless
   otherwise specified above.

  <p class=note>In OpenType, vertical font settings are provided by the
   <code>vhea</code>, <code>vmtx</code>, and <code>VORG</code> tables, as
   well as the <code>vert</code> and <code>vrt2</code> GSUB features. If any
   of these are present, the font is considered to have vertical font
   settings available.

  <p class=issue>It is a Unicode error that ScriptExtensions.txt does not
   include the Aegean and Common Indic characters listed above as exceptions;
   they shouldn't need special treatment once this is fixed.

  <h2 class=no-num id=intrinsic-sizing>Appendix D: Intrinsic Dimensions</h2>

  <p><em>This section is normative.</em>

  <p>CSS layout has several different concepts of automatic sizing that are
   used in various layout calculations. This section defines some more
   precise terminology to help connect the layout behaviors of this spec to
   the calculations used in other modules, and some new keywords for the
   width and height properties to allow authors to assign elements the
   dimensions resulting from these size calculations.

  <table class=propdef>
   <tbody>
    <tr>
     <th>Properties:

     <td>&lsquo;<code class=property>width</code>&rsquo;, &lsquo;<code
      class=property>min-width</code>&rsquo;, &lsquo;<code
      class=property>max-width</code>&rsquo;, &lsquo;<code
      class=property>height</code>&rsquo;, &lsquo;<code
      class=property>min-height</code>&rsquo;, &lsquo;<code
      class=property>max-height</code>&rsquo;

    <tr>
     <th>New Values:

     <td>&lsquo;<a href="#min-content"><code
      class=css>min-content</code></a>&rsquo; | &lsquo;<a
      href="#max-content"><code class=css>max-content</code></a>&rsquo; |
      &lsquo;<a href="#fill-available"><code
      class=css>fill-available</code></a>&rsquo; | &lsquo;<a
      href="#fit-content"><code class=css>fit-content</code></a>&rsquo;

    <tr>
     <th>Initial:

     <td>as defined in <a href="#CSS21"
      rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

    <tr>
     <th>Applies to:

     <td>as defined in <a href="#CSS21"
      rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

    <tr>
     <th>Inherited:

     <td>as defined in <a href="#CSS21"
      rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

    <tr>
     <th>Percentages:

     <td>as defined in <a href="#CSS21"
      rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

    <tr>
     <th>Media:

     <td>as defined in <a href="#CSS21"
      rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

    <tr>
     <th>Computed&#160;value:

     <td>specified value if keyword specified, else as defined in <a
      href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>
  </table>

  <p>There are four types of automatically-determined sizes in CSS (which are
   represented in the width and height properties by the keywords defined
   above):
   <!-- XXX Make these anchors dated once CSS2.1 hits REC, since we might
  decide to fix these gross editorial inconsistencies at some point in
  the errata. -->
   

  <dl>
   <dt><dfn id=min-content>min-content</dfn>

   <dd>Called the <i>preferred minimum width</i> in <a
    href="http://www.w3.org/TR/CSS21/visudet.html#float-width">CSS2.1&sect;10.3.5</a>
    and the <i>minimum content width</i> in <a
    href="http://www.w3.org/TR/CSS21/tables.html#auto-table-layout">CSS2.1&sect;5.2.2</a>,
    the <dfn id=min-content-measure>min-content measure</dfn> is defined
    roughly as the narrowest measure a box could take while fitting around
    its contents if <em>all</em> line break opportunities within the box were
    taken.

   <dt><dfn id=max-content>max-content</dfn>

   <dd>Called the <i>preferred width</i> in <a
    href="http://www.w3.org/TR/CSS21/visudet.html#float-width">CSS2.1&sect;10.3.5</a>
    and the <i>maximum cell width</i> in <a
    href="http://www.w3.org/TR/CSS21/tables.html#auto-table-layout">CSS2.1&sect;5.2.2</a>,
    the <dfn id=max-content-measure>max-content measure</dfn> is defined
    roughly as the narrowest measure a box could take while fitting around
    its contents if <em>none</em> of the optional line break opportunities
    within the box were taken.

   <dt><dfn id=fill-available>fill-available</dfn>

   <dd>Called the <i>available width</i> in <a
    href="http://www.w3.org/TR/CSS21/visudet.html#float-width">CSS2.1&sect;10.3.5</a>
    and computed by the rules in <a
    href="http://www.w3.org/TR/CSS21/visudet.html#blockwidth">CSS2.1&sect;10.3.3</a>,
    the <dfn id=fill-available-measure>fill-available measure</dfn> is
    calculated by subtracting out the element's margins, borders, and padding
    from the <a href="#available-measure"><i>available measure</i></a> and
    flooring the result at zero. If the available measure is infinite, then a
    <dfn id=fallback-measure>fallback measure</dfn> is used in place of the
    <a href="#available-measure"><i>available measure</i></a> in this
    calculation. (In the case of orthogonal flows, this is the measure of the
    initial containing block.) The <dfn
    id=fill-available-extent>fill-available extent</dfn> is similarly
    calculated by using the corresponding values from the block dimension.

   <dt><dfn id=fit-content>fit-content</dfn>

   <dd>Called the <i>shrink-to-fit</i> width in <a
    href="http://www.w3.org/TR/CSS21/visudet.html#float-width">CSS2.1&sect;10.3.5</a>,
    and <a href="http://www.w3.org/TR/css3-multicol/#pseudo-algorithm">CSS
    Multi-column Layout &sect; 3.4</a>, the <dfn
    id=fit-content-measure>fit-content measure</dfn> is defined as
    <code>max(<a href="#min-content"><i>min-content</i></a>, min(<a
    href="#max-content"><i>max-content</i></a>, <a
    href="#fill-available"><i>fill-available</i></a>))</code> if the
    available measure is finite, and as the <a
    href="#max-content"><i>max-content</i></a> measure otherwise. The <dfn
    id=fit-content-extent>fit-content extent</dfn> is calculated from the
    same expression applied to the block dimension.
  </dl>

  <p>For the layout models in CSS2.1, both the <dfn
   id=min-content-extent>min-content extent</dfn> and <dfn
   id=max-content-extent>max-content extent</dfn> of non-replaced elements
   are defined as the content extent as defined (for horizontal writing
   modes) in <a
   href="http://www.w3.org/TR/CSS21/visudet.html#normal-block">CSS2.1&sect;10.6.3</a>
   and <a
   href="http://www.w3.org/TR/CSS21/tables.html#height-layout">CSS2.1&sect;17.5.3</a>
   for elements with &lsquo;<code class=css>height: auto</code>&rsquo;.

  <p>For replaced elements, the <a href="#min-content"><i>min-content</i></a>
   and <a href="#max-content"><i>max-content</i></a> sizes are the same and
   correspond used size of the replaced element according to the &lsquo;<code
   class=css>auto</code>&rsquo; width and height calculations.

  <h3 class=no-num id=multicol-intrinsic> Intrinsic Sizes in Multi-column
   Layout</h3>

  <p>The <a href="#min-content"><i>min-content</i></a> and <a
   href="#max-content"><i>max-content</i></a> sizes of a multi-column element
   are undefined per <a href="#CSS3COL"
   rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a>. A future specification
   may define them. <!-- Sketchbook area. See 
  http://lists.w3.org/Archives/Public/www-style/2011Apr/0316.html
  http://lists.w3.org/Archives/Public/www-style/2011May/0468.html
  
<h4 id="multicol-intrinsic-measures">
Intrinsic Sizes for Multi-column Elements</h4>

  <p class="issue">This section is under discussion and may be removed</p>

  <dl>
    <dt>min-content</dt>
    <dd>The <i>min-content</i> measure of the multi-column element is
      the <i>min-content</i> measure of the multi-column element's
      contents.
    <dt>max-content</dt>
  </dl>

  <p>For multi-column elements laid out with infinite available measure (see
    <a href="#orthogonal-multicol">Multi-column Layout in Orthogonal Flows</a>),
    the <i>min-content</i> extent is the extent that would result
    from taking every permissible pagination break as a column break, and the
    <i>max-content</i> extent is the extent that would result from taking
    only the forced breaks. For all other multi-column elements it is, like
    CSS2.1 block-level boxes, the extent that would be calculated for an
    ''auto'' extent per [[CSS3MULTICOL]].

NOTES FROM ROSSEN:
  min-content measure is min(column-width, min-content)
  max-content measure is
    1. Pass w/ colspans displ: none;
       Get width
    2. Pass with colspans only in width
       Get remaining height
    3. Pass w/ spans again using remaining height
       Get width
    4. Layout in width as final
    Will lay out perfectly without colspans; will have some slack but no
    overflow when colspans present.

<h4 id="multicol-intrinsic-columns">
Intrinsic Sizes for Columns</h4>
-->
   

  <table class=propdef>
   <tbody>
    <tr>
     <th>Property:

     <td>&lsquo;<code class=property>column-width</code>&rsquo;

    <tr>
     <th>New Values:

     <td>&lsquo;<a href="#min-content"><code
      class=css>min-content</code></a>&rsquo; | &lsquo;<a
      href="#max-content"><code class=css>max-content</code></a>&rsquo; |
      &lsquo;<a href="#fill-available"><code
      class=css>fill-available</code></a>&rsquo; | &lsquo;<a
      href="#fit-content"><code class=css>fit-content</code></a>&rsquo;

    <tr>
     <th>Initial:

     <td>as defined in <a href="#CSS3COL"
      rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a>

    <tr>
     <th>Applies to:

     <td>as defined in <a href="#CSS3COL"
      rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a>

    <tr>
     <th>Inherited:

     <td>as defined in <a href="#CSS3COL"
      rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a>

    <tr>
     <th>Percentages:

     <td>as defined in <a href="#CSS3COL"
      rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a>

    <tr>
     <th>Media:

     <td>as defined in <a href="#CSS3COL"
      rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a>

    <tr>
     <th>Computed&#160;value:

     <td>specified value if keyword specified, else as defined in <a
      href="#CSS3COL" rel=biblioentry>[CSS3COL]<!--{{!CSS3COL}}--></a>
  </table>

  <p>When used as values for <a
   href="http://www.w3.org/TR/css3-multicol/#cw">&lsquo;<code
   class=property>column-width</code>&rsquo;</a>, the new keywords specify
   the optimal column width:

  <dl>
   <dt>&lsquo;<a href="#min-content"><code
    class=css>min-content</code></a>&rsquo;

   <dd>Specifies the optimal column width as the <a
    href="#min-content-measure"><i>min-content measure</i></a> of the
    multi-column element's contents.

   <dt>&lsquo;<a href="#max-content"><code
    class=css>max-content</code></a>&rsquo;

   <dd>Specifies the optimal column width as the <a
    href="#max-content-measure"><i>max-content measure</i></a> of the
    multi-column element's contents.

   <dt>&lsquo;<a href="#fill-available"><code
    class=css>fill-available</code></a>&rsquo;

   <dd>Specifies the optimal column width as the <a
    href="#fill-available-measure"><i>fill-available measure</i></a> of the
    multi-column element.

   <dt>&lsquo;<a href="#fit-content"><code
    class=css>fit-content</code></a>&rsquo;

   <dd>Specifies the optimal column width as <code>max(<a
    href="#min-content"><i>min-content</i></a>, min(<a
    href="#max-content"><i>max-content</i></a>, <a
    href="#fill-available"><i>fill-available</i></a>))</code>.
  </dl>

  <h2 class=no-num id=bidi-html> Appendix E: Bidi Rules for HTML</h2>

  <p>The style sheet rules that would achieve the bidi behaviors specified in
   <a href="#HTML401" rel=biblioentry>[HTML401]<!--{{HTML401}}--></a> for the
   HTML Strict doctype are given below:

  <pre>
/* HTML dir attribute creates an embedding */
*[dir="ltr"]    { direction: ltr; unicode-bidi: embed; }
*[dir="rtl"]    { direction: rtl; unicode-bidi: embed; }

/* BDO element creates an override */
bdo[dir="ltr"]  { direction: ltr; unicode-bidi: bidi-override; }
bdo[dir="rtl"]  { direction: rtl; unicode-bidi: bidi-override; }

/* HTML4.01:8.2.6 - preserve bidi behavior if 'display' is changed */
html, body,
div, address, blockquote, p,
ul, ol, li, dl, dt, dd,
fieldset, form,
h1, h2, h3, h4, h5, h6,
{ unicode-bidi: isolate; }
  </pre>

  <h2 class=no-num id=references> References</h2>

  <h3 class=no-num id=normative-references> Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS&#160;2.1) Specification.</cite></a> 7 June
    2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607">http://www.w3.org/TR/2011/REC-CSS2-20110607</a>
    </dd>
   <!---->

   <dt id=CSS3BG>[CSS3BG]

   <dd>Bert Bos; Elika J. Etemad; Brad Kemper. <a
    href="http://www.w3.org/TR/2011/CR-css3-background-20110215"><cite>CSS
    Backgrounds and Borders Module Level 3.</cite></a> 15 February 2011. W3C
    Candidate Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/CR-css3-background-20110215">http://www.w3.org/TR/2011/CR-css3-background-20110215</a>
    </dd>
   <!---->

   <dt id=CSS3COL>[CSS3COL]

   <dd>H&#229;kon Wium Lie. <a
    href="http://www.w3.org/TR/2011/CR-css3-multicol-20110412"><cite>CSS
    Multi-column Layout Module.</cite></a> 12 April 2011. W3C Candidate
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/CR-css3-multicol-20110412">http://www.w3.org/TR/2011/CR-css3-multicol-20110412</a>
    </dd>
   <!---->

   <dt id=RFC2119>[RFC2119]

   <dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key
    words for use in RFCs to Indicate Requirement Levels.</cite></a> Internet
    RFC 2119. URL: <a
    href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
    </dd>
   <!---->

   <dt id=SVG11>[SVG11]

   <dd>Erik Dahlstr&#246;m; et al. <a
    href="http://www.w3.org/TR/2011/PR-SVG11-20110609/"><cite>Scalable Vector
    Graphics (SVG) 1.1 (Second Edition).</cite></a> 9 June 2011. W3C Proposed
    Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/PR-SVG11-20110609/">http://www.w3.org/TR/2011/PR-SVG11-20110609/</a>
    </dd>
   <!---->

   <dt id=UAX11>[UAX11]

   <dd>Asmus Freytag. <a
    href="http://www.unicode.org/unicode/reports/tr11/tr11-8.html"><cite>East
    Asian Width.</cite></a> 23 March 2001. Unicode Standard Annex #11. URL:
    <a
    href="http://www.unicode.org/unicode/reports/tr11/tr11-8.html">http://www.unicode.org/unicode/reports/tr11/tr11-8.html</a>
    </dd>
   <!---->

   <dt id=UAX24>[UAX24]

   <dd>Mark Davis; Ken Whistler. <a
    href="http://www.unicode.org/reports/tr24/"><cite>Unicode Script
    Property.</cite></a> 27 September 2010. Unicode Standard Annex #24. URL:
    <a
    href="http://www.unicode.org/reports/tr24/">http://www.unicode.org/reports/tr24/</a>
    </dd>
   <!---->

   <dt id=UAX29>[UAX29]

   <dd>Mark Davis. <a
    href="http://www.unicode.org/reports/tr29/tr29-17.html"><cite>Unicode
    Text Segmentation.</cite></a> 8 October 2010. Unicode Standard Annex #29.
    URL: <a
    href="http://www.unicode.org/reports/tr29/tr29-17.html">http://www.unicode.org/reports/tr29/tr29-17.html</a>
    </dd>
   <!---->

   <dt id=UAX44>[UAX44]

   <dd>Mark Davis; Ken Whistler. <a
    href="http://www.unicode.org/reports/tr44/tr44-6.html"><cite>Unicode
    Character Database.</cite></a> 8 October 2010. Unicode Standard Annex
    #44. URL: <a
    href="http://www.unicode.org/reports/tr44/tr44-6.html">http://www.unicode.org/reports/tr44/tr44-6.html</a>
    </dd>
   <!---->

   <dt id=UNICODE>[UNICODE]

   <dd>The Unicode Consortium. <a
    href="http://www.unicode.org/unicode/standard/versions/enumeratedversions.html"><cite>The
    Unicode Standard.</cite></a> 2003. Defined by: The Unicode Standard,
    Version 4.0 (Boston, MA, Addison-Wesley, ISBN 0-321-18578-1), as updated
    from time to time by the publication of new versions URL: <a
    href="http://www.unicode.org/unicode/standard/versions/enumeratedversions.html">http://www.unicode.org/unicode/standard/versions/enumeratedversions.html</a>
    </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=other-references> Other references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS2>[CSS2]

   <dd>Ian Jacobs; et al. <a
    href="http://www.w3.org/TR/2008/REC-CSS2-20080411"><cite>Cascading Style
    Sheets, level 2 (CSS2) Specification.</cite></a> 11 April 2008. W3C
    Recommendation. URL: <a
    href="http://www.w3.org/TR/2008/REC-CSS2-20080411">http://www.w3.org/TR/2008/REC-CSS2-20080411</a>
    </dd>
   <!---->

   <dt id=CSS3COLOR>[CSS3COLOR]

   <dd>Tantek &#199;elik; Chris Lilley; L. David Baron. <a
    href="http://www.w3.org/TR/2011/REC-css3-color-20110607"><cite>CSS Color
    Module Level 3.</cite></a> 7 June 2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-css3-color-20110607">http://www.w3.org/TR/2011/REC-css3-color-20110607</a>
    </dd>
   <!---->

   <dt id=CSS3FONT>[CSS3FONT]

   <dd>John Daggett. <a
    href="http://www.w3.org/TR/2011/WD-css3-fonts-20110324"><cite>CSS Fonts
    Module Level 3.</cite></a> 24 March 2011. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-fonts-20110324">http://www.w3.org/TR/2011/WD-css3-fonts-20110324</a>
    </dd>
   <!---->

   <dt id=CSS3LIST>[CSS3LIST]

   <dd>Tab Atkins Jr. <a
    href="http://www.w3.org/TR/2011/WD-css3-lists-20110524"><cite>CSS Lists
    and Counters Module Level 3.</cite></a> 24 May 2011. W3C Working Draft.
    (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-lists-20110524">http://www.w3.org/TR/2011/WD-css3-lists-20110524</a>
    </dd>
   <!---->

   <dt id=CSS3PAGE>[CSS3PAGE]

   <dd>H&#229;kon Wium Lie; Melinda Grant. <a
    href="http://www.w3.org/TR/2006/WD-css3-page-20061010"><cite>CSS3 Module:
    Paged Media.</cite></a> 10 October 2006. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2006/WD-css3-page-20061010">http://www.w3.org/TR/2006/WD-css3-page-20061010</a>
    </dd>
   <!---->

   <dt id=CSS3TEXT>[CSS3TEXT]

   <dd>Elika J. Etemad; Koji Ishii; Shinyu Murakami. <a
    href="http://www.w3.org/TR/2011/WD-css3-text-20110412/"><cite>CSS Text
    Level 3.</cite></a> 12 April 2011. W3C Working Draft. (Work in progress.)
    URL: <a
    href="http://www.w3.org/TR/2011/WD-css3-text-20110412/">http://www.w3.org/TR/2011/WD-css3-text-20110412/</a>
    </dd>
   <!---->

   <dt id=HTML401>[HTML401]

   <dd>Dave Raggett; Arnaud Le Hors; Ian Jacobs. <a
    href="http://www.w3.org/TR/1999/REC-html401-19991224"><cite>HTML 4.01
    Specification.</cite></a> 24 December 1999. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/1999/REC-html401-19991224">http://www.w3.org/TR/1999/REC-html401-19991224</a>
    </dd>
   <!---->

   <dt id=UTN22>[UTN22]

   <dd>Elika J. Etemad. <a href="http://unicode.org/notes/tn22/"><cite>Robust
    Vertical Text Layout.</cite></a> 25 April 2005. Unicode Technical Note
    #22. URL: <a
    href="http://unicode.org/notes/tn22/">http://unicode.org/notes/tn22/</a></dd>
   <!---->
  </dl>
  <!--end-informative-->

  <h2 class=no-num id=property-index> Property Index</h2>
  <!--begin-properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies&nbsp;to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
    <tr>
     <th><a class=property href="#direction0">direction</a>

     <td>ltr | rtl

     <td>ltr

     <td>all elements

     <td>yes

     <td>N/A

     <td>visual

    <tr>
     <th><span class=property>&lsquo;caption-side&rsquo;</span>

     <td>&lsquo;before&rsquo; | &lsquo;after&rsquo;

     <td>before

     <td>same as CSS2.1

     <td>same as CSS2.1

     <td>same as CSS2.1

     <td>same as CSS2.1

    <tr>
     <th><span class=property>&lsquo;column-width&rsquo;</span>

     <td>&lsquo;min-content&rsquo; | &lsquo;max-content&rsquo; |
      &lsquo;fill-available&rsquo; | &lsquo;fit-content&rsquo;

     <td>as defined in [CSS3COL]

     <td>as defined in [CSS3COL]

     <td>as defined in [CSS3COL]

     <td>as defined in [CSS3COL]

     <td>as defined in [CSS3COL]

    <tr>
     <th><span class=property>&lsquo;width&rsquo;</span>, <span
      class=property>&lsquo;min-width&rsquo;</span>, <span
      class=property>&lsquo;max-width&rsquo;</span>, <span
      class=property>&lsquo;height&rsquo;</span>, <span
      class=property>&lsquo;min-height&rsquo;</span>, <span
      class=property>&lsquo;max-height&rsquo;</span>

     <td>&lsquo;min-content&rsquo; | &lsquo;max-content&rsquo; |
      &lsquo;fill-available&rsquo; | &lsquo;fit-content&rsquo;

     <td>as defined in [CSS21]

     <td>as defined in [CSS21]

     <td>as defined in [CSS21]

     <td>as defined in [CSS21]

     <td>as defined in [CSS21]

    <tr>
     <th><a class=property
      href="#text-combine-horizontal0">text-combine-horizontal</a>

     <td>none | all | [ [digits &lt;integer> | ascii-digits &lt;integer> ] ||
      [ alpha &lt;integer> | latin &lt;integer> ] || alphanumeric
      &lt;integer> ]

     <td>none

     <td>non-replaced inline elements

     <td>yes

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#text-combine-mode0">text-combine-mode</a>

     <td>auto | compress | [ no-compress || use-glyphs ]

     <td>auto

     <td>non-replaced inline elements

     <td>yes

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#text-orientation0">text-orientation</a>

     <td>upright-right | upright | sideways-right | sideways-left | sideways
      | use-glyph-orientation

     <td>upright-right

     <td>all elements except table row groups, rows, column groups, and
      columns

     <td>yes

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#unicode-bidi0">unicode-bidi</a>

     <td>normal | embed | [ isolate || bidi-override ] | plaintext

     <td>normal

     <td>all elements, but see prose

     <td>no

     <td>N/A

     <td>visual

    <tr>
     <th><a class=property href="#writing-mode1">writing-mode</a>

     <td>horizontal-tb | vertical-rl | vertical-lr

     <td>horizontal-tb

     <td>All elements except table row groups, table column groups, table
      rows, and table columns

     <td>yes

     <td>N/A

     <td>visual
  </table>
  <!--end-properties-->
  <!-- Add alphabetic index? -->
